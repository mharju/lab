shadow$provide[56]=function(mc,Nb,Tb,Hb){(function(m,ka){"function"===typeof define&&define.amd?define(["parinfer"],ka):"object"===typeof Tb&&Tb.exports?Tb.exports=ka(Nb(55)):m.parinferCodeMirror=ka(m.parinfer)})(this,function(m){function ka(f){return"parinferCodeMirror: "+f}function Fa(f){if(-1===d.indexOf(f))throw ka('Mode "'+f+'" is invalid. Must be one of: '+d.join(","));}function u(f){f=f.__parinfer__;if(!f)throw ka("You must call parinferCodeMirror.init(cm) on a CodeMirror instance before you can use the rest of the API.");
return f}function B(f){return f.map(function(k){return{x:k.from.ch,lineNo:k.from.line,oldText:k.removed.join("\n"),newText:k.text.join("\n")}})}function ha(f,k){var p=f.getAllMarks();for(f=0;f<p.length;f++)p[f].className===k&&p[f].clear()}function na(f,k,p,v,y){f.markText({line:k,ch:p},{line:k,ch:v},{className:y})}function Ca(f,k){ha(f,"parinfer-error");k&&(na(f,k.lineNo,k.x,k.x+1,"parinfer-error"),k.extra&&na(f,k.extra.lineNo,k.extra.x,k.extra.x+1,"parinfer-error"))}function La(f,k){ha(f,"parinfer-paren-trail");
if(k){var p;for(p=0;p<k.length;p++){var v=k[p];na(f,v.lineNo,v.startX,v.endX,"parinfer-paren-trail")}}}function ea(f){f=f.listSelections()[0];return Math.min(f.head.line,f.anchor.line)}function Q(f,k,p){if(!f)return null;var v,y;for(v=0;v<f.length;v++){var x=f[v];if(k<x){var J=x;break}k>x&&(y=x)}if(-1===p)return y;if(1===p)return J}function ba(f,k){f=f.getLine(k);for(k=0;k<f.length;k++)if(" "!==f[k])return k;return null}function W(f,k){var p=f.somethingSelected(),v;if(v=u(f).tabStops){var y=[],x;
for(x=0;x<v.length;x++){var J=v[x];-1>=J.x&&y.pop();y.push(J.x);y.push(J.x+("("===J.ch?2:1));null!=J.argX&&y.push(J.argX)}v=y}else v=null;p?(p=v,v=ea(f),v=ba(f,v),p=Q(p,v,k),null==p&&(p=Math.max(0,v+2*k)),f.indentSelection(p-v)):(x=v,y=f.getCursor(),p=y.line,v=y.ch,y=ba(f,y.line),x=Q(x,v,k),k=null==x||null!=y&&v!==y?Math.max(0,v+2*k):x,null!=y&&y<v&&v<k?(k=Array(k-v+1).join(" "),f.replaceSelection(k)):(k-=v,""!==f.getDoc().getLine(p).trim()?f.indentLine(p,k):0<k?(k=Array(k+1).join(" "),f.replaceSelection(k)):
(v=f.getCursor().ch,f.replaceRange("",{line:p,ch:v+k},{line:p,ch:v},"+indent"))))}function aa(f,k){return k.line===f.lineNo&&f.startX<=k.ch}function H(f,k){var p;for(p=0;p<k.length;p++){var v=f,y=k[p],x=v.getDoc().sel,J=x.ranges[0];(J=y.lineNo===y.closer.lineNo||!y.closer.trail||aa(y.closer.trail,J.anchor)||aa(y.closer.trail,J.head))||(J=y.closer,J=-1!==x.contains({line:J.lineNo,ch:J.x}));J||na(v,y.closer.lineNo,y.closer.x,y.closer.x+1,"parinfer-locus-paren");H(v,y.children)}}function R(f,k){f=f.charCoords({line:k.lineNo,
ch:k.x},"local");return{midx:f.left+(f.right-f.left)/2,right:f.right,left:f.left,top:f.top,bottom:f.bottom}}function ja(f,k){var p;for(p=0;p<k.length;p++){var v=f,y=k[p],x=v.__parinfer__.layer,J=x.paper,da=R(v,y),wa=R(v,y.closer);if(y.closer.trail&&y.lineNo!==y.closer.lineNo)switch(x.type){case "guides":J.path(["M",da.midx,da.bottom,"V",wa.bottom].join(" "));break;case "locus":x=v;var ca=y.lineNo;for(var fa=y.closer.lineNo,Ha=x.getDoc(),Oa=0,Wa=0;ca<=fa;ca++){var tb=Ha.getLine(ca);tb.length>Oa&&(Oa=
tb.length,Wa=ca)}x=R(x,{lineNo:Wa,x:Oa}).right;J.path(["M",da.midx,da.top+4,"A",4,4,0,0,1,da.midx+4,da.top,"H",x-4,"A",4,4,0,0,1,x,da.top+4,"V",wa.bottom,"H",da.midx,"V",da.bottom].join(" "))}ja(v,y.children)}}function N(f,k){f=f.__parinfer__.layer;f.type=k;k=document.createElement("div");k.style.position="absolute";k.style.left="0";k.style.top="0";k.style["z-index"]=100;k.className="parinfer-locus";f.el=k;f.container.appendChild(k);f.paper=Raphael(k,f.container.clientWidth,f.container.clientHeight)}
function O(f){(f=f.__parinfer__.layer)&&f.el&&f.container.removeChild(f.el)}function Y(f,k){ha(f,"parinfer-locus-paren");k&&(H(f,k),O(f),N(f,"guides"),ja(f,k))}function E(f,k){k&&(O(f),N(f,"guides"),ja(f,k))}function X(f,k){var p=f.cm,v=p.getValue(),y=p.somethingSelected(),x=p.listSelections(),J=p.getCursor(),da=p.getScrollerElement();J={cursorLine:J.line,cursorX:J.ch,prevCursorLine:f.prevCursorLine,prevCursorX:f.prevCursorX};y&&(J.selectionStartLine=ea(p));if(f.options)for(var wa in f.options)f.options.hasOwnProperty(wa)&&
(J[wa]=f.options[wa]);k&&(J.changes=B(k));wa=f.options&&f.options.locus;var ca=f.options&&f.options.guides;if(wa||ca)delete J.locus,delete J.guides,J.returnParens=!0;var fa=f.fixMode?"paren":f.mode;switch(fa){case "indent":var Ha=m.indentMode(v,J);break;case "paren":Ha=m.parenMode(v,J);break;case "smart":Ha=m.smartMode(v,J);break;default:Fa(fa)}f.parens=Ha.parens;f.tabStops=Ha.tabStops;v!==Ha.text&&(v=p.getHistory(),p.setValue(Ha.text),f.monitorCursor=!1,y?p.setSelections(x):p.setCursor(Ha.cursorLine,
Ha.cursorX),p.setHistory(v),setTimeout(function(){f.monitorCursor=!0},0),p.scrollTo(da.scrollLeft,da.scrollTop));Ca(p,Ha.error);La(p,Ha.parenTrails);f.prevCursorLine=Ha.cursorLine;f.prevCursorX=Ha.cursorX;wa?Y(p,Ha.parens):ca&&E(p,Ha.parens);return f.fixMode&&Ha.success?(f.fixMode=!1,X(f,k)):Ha.success}function ra(f){clearTimeout(f.cursorTimeout);f.monitorCursor&&(f.cursorTimeout=setTimeout(function(){X(f)},0))}function ya(f){if(!f.enabled){f.callbackCursor=function(p){ra(f)};f.callbackChanges=function(p,
v){clearTimeout(f.cursorTimeout);"setValue"!==v[0].origin&&X(f,v)};var k=f.cm;k.on("cursorActivity",f.callbackCursor);k.on("changes",f.callbackChanges);f.parinferKeys={Tab:function(p){W(p,1)},"Shift-Tab":function(p){W(p,-1)}};k.addKeyMap(f.parinferKeys);f.enabled=!0}}function c(f){f=u(f);"paren"!==f.mode&&(f.fixMode=!0);ya(f);return X(f)}var d=["paren","indent","smart"];return{version:"1.4.2",init:function(f,k,p){var v=f.__parinfer__;if(v)throw ka("init has already been called on this CodeMirror instance");
k=k||"smart";Fa(k);v={cm:f,mode:k,options:p,enabled:!1,cursorTimeout:null,monitorCursor:!0,prevCursorX:null,prevCursorLine:null,callbackCursor:null,callbackChanges:null};k=f.__parinfer__=v;p=f.getWrapperElement().querySelector(".CodeMirror-lines").parentNode;k.layer={container:p};return c(f)},enable:c,disable:function(f){f=u(f);if(f.enabled){var k=f.cm;ha(k,"parinfer-error");ha(k,"parinfer-paren-trail");k.off("cursorActivity",f.callbackCursor);k.off("changes",f.callbackChanges);k.removeKeyMap(f.parinferKeys);
f.enabled=!1}},setMode:function(f,k){f=u(f);Fa(k);f.mode=k;return X(f)},setOptions:function(f,k){f=u(f);f.options=k;return X(f)}}})}
goog.provide("module$node_modules$parinfer_codemirror$parinfer_codemirror");
goog.global. module$node_modules$parinfer_codemirror$parinfer_codemirror=shadow.js.require(56, {});
