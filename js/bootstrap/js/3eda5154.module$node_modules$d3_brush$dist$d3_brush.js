shadow$provide[27]=function(mc,Nb,Tb,Hb){(function(m,ka){"object"===typeof Hb&&"undefined"!==typeof Tb?ka(Hb,Nb(19),Nb(21),Nb(23),Nb(20),Nb(26)):"function"===typeof define&&define.amd?define("exports d3-dispatch d3-drag d3-interpolate d3-selection d3-transition".split(" "),ka):(m=m||self,ka(m.d3=m.d3||{},m.d3,m.d3,m.d3,m.d3,m.d3))})(this,function(m,ka,Fa,u,B,ha){function na(y){return function(){return y}}function Ca(y,x,J){this.target=y;this.type=x;this.selection=J}function La(){B.event.preventDefault();
B.event.stopImmediatePropagation()}function ea(y){return[+y[0],+y[1]]}function Q(y){return[ea(y[0]),ea(y[1])]}function ba(y){return function(x){return B.touch(x,B.event.touches,y)}}function W(y){return{type:y}}function aa(){return!B.event.ctrlKey&&!B.event.button}function H(){var y=this.ownerSVGElement||this;return y.hasAttribute("viewBox")?(y=y.viewBox.baseVal,[[y.x,y.y],[y.x+y.width,y.y+y.height]]):[[0,0],[y.width.baseVal.value,y.height.baseVal.value]]}function R(){return navigator.maxTouchPoints||
"ontouchstart"in this}function ja(y){for(;!y.__brush;)if(!(y=y.parentNode))return;return y.__brush}function N(y){function x(oa){var la=oa.property("__brush",Oa).selectAll(".overlay").data([W("overlay")]);la.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",d.overlay).merge(la).each(function(){var ua=ja(this).extent;B.select(this).attr("x",ua[0][0]).attr("y",ua[0][1]).attr("width",ua[1][0]-ua[0][0]).attr("height",ua[1][1]-ua[0][1])});oa.selectAll(".selection").data([W("selection")]).enter().append("rect").attr("class",
"selection").attr("cursor",d.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");la=oa.selectAll(".handle").data(y.handles,function(ua){return ua.type});la.exit().remove();la.enter().append("rect").attr("class",function(ua){return"handle handle--"+ua.type}).attr("cursor",function(ua){return d[ua.type]});oa.each(J).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",ca).filter(gb).on("touchstart.brush",ca).on("touchmove.brush",
fa).on("touchend.brush touchcancel.brush",Ha).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function J(){var oa=B.select(this),la=ja(this).selection;la?(oa.selectAll(".selection").style("display",null).attr("x",la[0][0]).attr("y",la[0][1]).attr("width",la[1][0]-la[0][0]).attr("height",la[1][1]-la[0][1]),oa.selectAll(".handle").style("display",null).attr("x",function(ua){return"e"===ua.type[ua.type.length-1]?la[1][0]-Ma/2:la[0][0]-Ma/2}).attr("y",function(ua){return"s"===
ua.type[0]?la[1][1]-Ma/2:la[0][1]-Ma/2}).attr("width",function(ua){return"n"===ua.type||"s"===ua.type?la[1][0]-la[0][0]+Ma:Ma}).attr("height",function(ua){return"e"===ua.type||"w"===ua.type?la[1][1]-la[0][1]+Ma:Ma})):oa.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function da(oa,la,ua){var G=oa.__brush.emitter;return!G||ua&&G.clean?new wa(oa,la,ua):G}function wa(oa,la,ua){this.that=oa;this.args=la;this.state=oa.__brush;
this.active=0;this.clean=ua}function ca(){function oa(){var ab=db(Aa);!Eb||V||Ba||(Math.abs(ab[0]-ob[0])>Math.abs(ab[1]-ob[1])?Ba=!0:V=!0);ob=ab;bb=!0;La();la()}function la(){Rb=ob[0]-ub[0];Ga=ob[1]-ub[1];switch(K){case Y:case O:D&&(Rb=Math.max(Ia-Pa,Math.min(Cb-Gb,Rb)),yb=Pa+Rb,Vb=Gb+Rb);U&&(Ga=Math.max(rb-wb,Math.min(gc-$b,Ga)),Db=wb+Ga,sb=$b+Ga);break;case E:0>D?(Rb=Math.max(Ia-Pa,Math.min(Cb-Pa,Rb)),yb=Pa+Rb,Vb=Gb):0<D&&(Rb=Math.max(Ia-Gb,Math.min(Cb-Gb,Rb)),yb=Pa,Vb=Gb+Rb);0>U?(Ga=Math.max(rb-
wb,Math.min(gc-wb,Ga)),Db=wb+Ga,sb=$b):0<U&&(Ga=Math.max(rb-$b,Math.min(gc-$b,Ga)),Db=wb,sb=$b+Ga);break;case X:D&&(yb=Math.max(Ia,Math.min(Cb,Pa-Rb*D)),Vb=Math.max(Ia,Math.min(Cb,Gb+Rb*D))),U&&(Db=Math.max(rb,Math.min(gc,wb-Ga*U)),sb=Math.max(rb,Math.min(gc,$b+Ga*U)))}if(Vb<yb){D*=-1;var ab=Pa;Pa=Gb;Gb=ab;ab=yb;yb=Vb;Vb=ab;Na in f&&uc.attr("cursor",d[Na=f[Na]])}sb<Db&&(U*=-1,ab=wb,wb=$b,$b=ab,ab=Db,Db=sb,sb=ab,Na in k&&uc.attr("cursor",d[Na=k[Na]]));ma.selection&&(za=ma.selection);V&&(yb=za[0][0],
Vb=za[1][0]);Ba&&(Db=za[0][1],sb=za[1][1]);if(za[0][0]!==yb||za[0][1]!==Db||za[1][0]!==Vb||za[1][1]!==sb)ma.selection=[[yb,Db],[Vb,sb]],J.call(Aa),Bb.brush()}function ua(){B.event.stopImmediatePropagation();if(B.event.touches){if(B.event.touches.length)return;fb&&clearTimeout(fb);fb=setTimeout(function(){fb=null},500)}else Fa.dragEnable(B.event.view,bb),Va.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);oc.attr("pointer-events","all");uc.attr("cursor",d.overlay);ma.selection&&(za=
ma.selection);if(za[0][0]===za[1][0]||za[0][1]===za[1][1])ma.selection=null,J.call(Aa);Bb.end()}function G(){switch(B.event.keyCode){case 16:Eb=D&&U;break;case 18:K===E&&(D&&(Gb=Vb-Rb*D,Pa=yb+Rb*D),U&&($b=sb-Ga*U,wb=Db+Ga*U),K=X,la());break;case 32:if(K===E||K===X)0>D?Gb=Vb-Rb:0<D&&(Pa=yb-Rb),0>U?$b=sb-Ga:0<U&&(wb=Db-Ga),K=Y,uc.attr("cursor",d.selection),la();break;default:return}La()}function qa(){switch(B.event.keyCode){case 16:Eb&&(V=Ba=Eb=!1,la());break;case 18:K===X&&(0>D?Gb=Vb:0<D&&(Pa=yb),
0>U?$b=sb:0<U&&(wb=Db),K=E,la());break;case 32:K===Y&&(B.event.altKey?(D&&(Gb=Vb-Rb*D,Pa=yb+Rb*D),U&&($b=sb-Ga*U,wb=Db+Ga*U),K=X):(0>D?Gb=Vb:0<D&&(Pa=yb),0>U?$b=sb:0<U&&(wb=Db),K=E),uc.attr("cursor",d[Na]),la());break;default:return}La()}if((!fb||B.event.touches)&&tb.apply(this,arguments)){var Aa=this,Na=B.event.target.__data__.type,K="selection"===(qb&&B.event.metaKey?Na="overlay":Na)?O:qb&&B.event.altKey?X:E,D=y===ya?null:p[Na],U=y===ra?null:v[Na],ma=ja(Aa),Ta=ma.extent,za=ma.selection,Ia=Ta[0][0],
Pa,rb=Ta[0][1],wb,Cb=Ta[1][0],Gb,gc=Ta[1][1],$b,Rb=0,Ga=0,bb,Eb=D&&U&&qb&&B.event.shiftKey,V,Ba,db=B.event.touches?ba(B.event.changedTouches[0].identifier):B.mouse,ub=db(Aa),ob=ub,Bb=da(Aa,arguments,!0).beforestart();"overlay"===Na?(za&&(bb=!0),ma.selection=za=[[Pa=y===ya?Ia:ub[0],wb=y===ra?rb:ub[1]],[Gb=y===ya?Cb:Pa,$b=y===ra?gc:wb]]):(Pa=za[0][0],wb=za[0][1],Gb=za[1][0],$b=za[1][1]);var yb=Pa;var Db=wb;var Vb=Gb;var sb=$b;var oc=B.select(Aa).attr("pointer-events","none"),uc=oc.selectAll(".overlay").attr("cursor",
d[Na]);if(B.event.touches)Bb.moved=oa,Bb.ended=ua;else{var Va=B.select(B.event.view).on("mousemove.brush",oa,!0).on("mouseup.brush",ua,!0);if(qb)Va.on("keydown.brush",G,!0).on("keyup.brush",qa,!0);Fa.dragDisable(B.event.view)}B.event.stopImmediatePropagation();ha.interrupt(Aa);J.call(Aa);Bb.start()}}function fa(){da(this,arguments).moved()}function Ha(){da(this,arguments).ended()}function Oa(){var oa=this.__brush||{selection:null};oa.extent=Q(Wa.apply(this,arguments));oa.dim=y;return oa}var Wa=H,
tb=aa,gb=R,qb=!0,nb=ka.dispatch("start","brush","end"),Ma=6,fb;x.move=function(oa,la){oa.selection?oa.on("start.brush",function(){da(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){da(this,arguments).end()}).tween("brush",function(){function ua(U){qa.selection=1===U&&null===K?null:D(U);J.call(G);Aa.brush()}var G=this,qa=G.__brush,Aa=da(G,arguments),Na=qa.selection,K=y.input("function"===typeof la?la.apply(this,arguments):la,qa.extent),D=u.interpolate(Na,K);return null!==
Na&&null!==K?ua:ua(1)}):oa.each(function(){var ua=arguments,G=this.__brush,qa=y.input("function"===typeof la?la.apply(this,ua):la,G.extent);ua=da(this,ua).beforestart();ha.interrupt(this);G.selection=null===qa?null:qa;J.call(this);ua.start().brush().end()})};x.clear=function(oa){x.move(oa,null)};wa.prototype={beforestart:function(){1===++this.active&&(this.state.emitter=this,this.starting=!0);return this},start:function(){this.starting?(this.starting=!1,this.emit("start")):this.emit("brush");return this},
brush:function(){this.emit("brush");return this},end:function(){0===--this.active&&(delete this.state.emitter,this.emit("end"));return this},emit:function(oa){B.customEvent(new Ca(x,oa,y.output(this.state.selection)),nb.apply,nb,[oa,this.that,this.args])}};x.extent=function(oa){return arguments.length?(Wa="function"===typeof oa?oa:na(Q(oa)),x):Wa};x.filter=function(oa){return arguments.length?(tb="function"===typeof oa?oa:na(!!oa),x):tb};x.touchable=function(oa){return arguments.length?(gb="function"===
typeof oa?oa:na(!!oa),x):gb};x.handleSize=function(oa){return arguments.length?(Ma=+oa,x):Ma};x.keyModifiers=function(oa){return arguments.length?(qb=!!oa,x):qb};x.on=function(){var oa=nb.on.apply(nb,arguments);return oa===nb?x:oa};return x}var O={name:"drag"},Y={name:"space"},E={name:"handle"},X={name:"center"},ra={name:"x",handles:["w","e"].map(W),input:function(y,x){return null==y?null:[[+y[0],x[0][1]],[+y[1],x[1][1]]]},output:function(y){return y&&[y[0][0],y[1][0]]}},ya={name:"y",handles:["n",
"s"].map(W),input:function(y,x){return null==y?null:[[x[0][0],+y[0]],[x[1][0],+y[1]]]},output:function(y){return y&&[y[0][1],y[1][1]]}},c={name:"xy",handles:"n w e s nw ne sw se".split(" ").map(W),input:function(y){return null==y?null:Q(y)},output:function(y){return y}},d={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},f={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},k={n:"s",s:"n",nw:"sw",
ne:"se",se:"ne",sw:"nw"},p={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},v={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};m.brush=function(){return N(c)};m.brushSelection=function(y){return(y=y.__brush)?y.dim.output(y.selection):null};m.brushX=function(){return N(ra)};m.brushY=function(){return N(ya)};Object.defineProperty(m,"__esModule",{value:!0})})}
goog.provide("module$node_modules$d3_brush$dist$d3_brush");
goog.global. module$node_modules$d3_brush$dist$d3_brush=shadow.js.require(27, {});
