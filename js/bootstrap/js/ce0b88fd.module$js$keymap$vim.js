shadow$provide[54]=function(mc,Nb,Tb,Hb){(function(m){"object"==typeof Hb&&"object"==typeof Tb?m(Nb(1),Nb(51),Nb(52),Nb(53)):"function"==typeof define&&define.amd?define(["codemirror/lib/codemirror","codemirror/addon/search/searchcursor","codemirror/addon/dialog/dialog","codemirror/addon/edit/matchbrackets"],m):m(CodeMirror)})(function(m){var ka=[{keys:"\x3cLeft\x3e",type:"keyToKey",toKeys:"h"},{keys:"\x3cRight\x3e",type:"keyToKey",toKeys:"l"},{keys:"\x3cUp\x3e",type:"keyToKey",toKeys:"k"},{keys:"\x3cDown\x3e",
type:"keyToKey",toKeys:"j"},{keys:"\x3cSpace\x3e",type:"keyToKey",toKeys:"l"},{keys:"\x3cBS\x3e",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"\x3cDel\x3e",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"\x3cC-Space\x3e",type:"keyToKey",toKeys:"W"},{keys:"\x3cC-BS\x3e",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"\x3cS-Space\x3e",type:"keyToKey",toKeys:"w"},{keys:"\x3cS-BS\x3e",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"\x3cC-n\x3e",type:"keyToKey",toKeys:"j"},{keys:"\x3cC-p\x3e",
type:"keyToKey",toKeys:"k"},{keys:"\x3cC-[\x3e",type:"keyToKey",toKeys:"\x3cEsc\x3e"},{keys:"\x3cC-c\x3e",type:"keyToKey",toKeys:"\x3cEsc\x3e"},{keys:"\x3cC-[\x3e",type:"keyToKey",toKeys:"\x3cEsc\x3e",context:"insert"},{keys:"\x3cC-c\x3e",type:"keyToKey",toKeys:"\x3cEsc\x3e",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},
{keys:"\x3cHome\x3e",type:"keyToKey",toKeys:"0"},{keys:"\x3cEnd\x3e",type:"keyToKey",toKeys:"$"},{keys:"\x3cPageUp\x3e",type:"keyToKey",toKeys:"\x3cC-b\x3e"},{keys:"\x3cPageDown\x3e",type:"keyToKey",toKeys:"\x3cC-f\x3e"},{keys:"\x3cCR\x3e",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"\x3cIns\x3e",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,
toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",
type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,
wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",
motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"\x3cC-f\x3e",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"\x3cC-b\x3e",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"\x3cC-d\x3e",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"\x3cC-u\x3e",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",
motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,
toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f\x3ccharacter\x3e",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F\x3ccharacter\x3e",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t\x3ccharacter\x3e",
type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T\x3ccharacter\x3e",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'\x3ccharacter\x3e",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`\x3ccharacter\x3e",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},
{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]\x3ccharacter\x3e",
type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[\x3ccharacter\x3e",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",
type:"operator",operator:"change"},{keys:"\x3d",type:"operator",operator:"indentAuto"},{keys:"\x3e",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"\x3c",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",
motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},
{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",
type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"\x3cC-w\x3e",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"\x3cC-w\x3e",type:"idle",context:"normal"},{keys:"\x3cC-i\x3e",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"\x3cC-o\x3e",type:"action",
action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"\x3cC-e\x3e",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"\x3cC-y\x3e",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},
context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",
isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"\x3cC-v\x3e",type:"action",
action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"\x3cC-q\x3e",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r\x3ccharacter\x3e",
type:"action",action:"replace",isEdit:!0},{keys:"@\x3ccharacter\x3e",type:"action",action:"replayMacro"},{keys:"q\x3ccharacter\x3e",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",
operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"\x3cC-r\x3e",type:"action",action:"redo"},{keys:"m\x3ccharacter\x3e",type:"action",action:"setMark"},{keys:'"\x3ccharacter\x3e',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},
{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z\x3cCR\x3e",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"\x3cC-a\x3e",type:"action",action:"incrementNumberToken",
isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"\x3cC-x\x3e",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"\x3cC-t\x3e",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"\x3cC-d\x3e",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a\x3ccharacter\x3e",type:"motion",motion:"textObjectManipulation"},{keys:"i\x3ccharacter\x3e",type:"motion",motion:"textObjectManipulation",
motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",
type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],Fa=ka.length,u=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},
{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"global",shortName:"g"}],B=m.Pos;m.Vim=function(){function ha(r,w){this==m.keyMap.vim&&(m.rmClass(r.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==r.getOption("inputStyle")&&null!=document.body.style.caretColor&&(La(r),r.off("cursorActivity",Ca),r.state.fatCursorMarks=null,
r.getInputField().style.caretColor=""));w&&w.attach==na||(r.setOption("disableInput",!1),r.off("cursorActivity",ob),m.off(r.getInputField(),"paste",ba(r)),r.state.vim=null)}function na(r,w){this==m.keyMap.vim&&(m.addClass(r.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==r.getOption("inputStyle")&&null!=document.body.style.caretColor&&(r.state.fatCursorMarks=[],Ca(r),r.on("cursorActivity",Ca),r.getInputField().style.caretColor="transparent"));w&&w.attach==na||(r.setOption("disableInput",!0),
r.setOption("showCursorWhenSelecting",!1),m.signal(r,"vim-mode-change",{mode:"normal"}),r.on("cursorActivity",ob),X(r),m.on(r.getInputField(),"paste",ba(r)))}function Ca(r){if(r.state.fatCursorMarks){La(r);for(var w=r.listSelections(),F=[],Z=0;Z<w.length;Z++){var sa=w[Z];if(sa.empty()){var ta=r.getLine(sa.anchor.line).length;sa.anchor.ch<ta?F.push(r.markText(sa.anchor,B(sa.anchor.line,sa.anchor.ch+1),{className:"cm-fat-cursor-mark"})):F.push(r.markText(B(sa.anchor.line,ta-1),B(sa.anchor.line,ta),
{className:"cm-fat-cursor-mark"}))}}r.state.fatCursorMarks=F}}function La(r){if(r=r.state.fatCursorMarks)for(var w=0;w<r.length;w++)r[w].clear()}function ea(r,w){if(w){if(this[r])return this[r];r=Q(r);if(!r)return!1;var F=m.Vim.findKey(w,r);"function"==typeof F&&m.signal(w,"vim-keypress",r);return F}}function Q(r){if("'"==r.charAt(0))return r.charAt(1);r=r.split(/-(?!$)/);var w=r[r.length-1];if(1==r.length&&1==r[0].length||2==r.length&&"Shift"==r[0]&&1==w.length)return!1;for(var F=!1,Z=0;Z<r.length;Z++){var sa=
r[Z];sa in uc?r[Z]=uc[sa]:F=!0;sa in Va&&(r[Z]=Va[sa])}if(!F)return!1;H(w)&&(r[r.length-1]=w.toLowerCase());return"\x3c"+r.join("-")+"\x3e"}function ba(r){var w=r.state.vim;w.onPasteFn||(w.onPasteFn=function(){w.insertMode||(r.setCursor(x(r.getCursor(),0,1)),Xb.enterInsertMode(r,{},w))});return w.onPasteFn}function W(r,w){for(var F=[],Z=r;Z<r+w;Z++)F.push(String.fromCharCode(Z));return F}function aa(r,w){return w>=r.firstLine()&&w<=r.lastLine()}function H(r){return/^[A-Z]$/.test(r)}function R(r){return/^\s*$/.test(r)}
function ja(r,w){for(var F=0;F<w.length;F++)if(w[F]==r)return!0;return!1}function N(r,w,F,Z,sa){if(void 0===w&&!sa)throw Error("defaultValue is required unless callback is provided");F||(F="string");wd[r]={type:F,defaultValue:w,callback:sa};if(Z)for(F=0;F<Z.length;F++)wd[Z[F]]=wd[r];w&&O(r,w)}function O(r,w,F,Z){var sa=wd[r];Z=Z||{};Z=Z.scope;if(!sa)return Error("Unknown option: "+r);if("boolean"==sa.type){if(w&&!0!==w)return Error("Invalid argument: "+r+"\x3d"+w);!1!==w&&(w=!0)}sa.callback?("local"!==
Z&&sa.callback(w,void 0),"global"!==Z&&F&&sa.callback(w,F)):("local"!==Z&&(sa.value="boolean"==sa.type?!!w:w),"global"!==Z&&F&&(F.state.vim.options[r]={value:w}))}function Y(r,w,F){var Z=wd[r];F=F||{};F=F.scope;if(!Z)return Error("Unknown option: "+r);if(Z.callback){r=w&&Z.callback(void 0,w);if("global"!==F&&void 0!==r)return r;if("local"!==F)return Z.callback()}else return r="global"!==F&&w&&w.state.vim.options[r],(r||"local"!==F&&Z||{}).value}function E(){this.latestRegister=void 0;this.isRecording=
this.isPlaying=!1;this.replaySearchQueries=[];this.onRecordingDone=void 0;this.lastInsertModeChanges=pd()}function X(r){r.state.vim||(r.state.vim={inputState:new ya,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},fakeCursor:null,insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}});return r.state.vim}function ra(){cc={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,
jumpList:Md(),macroModeState:new E,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new f({}),searchHistoryController:new k,exCommandHistoryController:new k};for(var r in wd){var w=wd[r];w.value=w.defaultValue}}function ya(){this.prefixRepeat=[];this.motionRepeat=[];this.motionArgs=this.motion=this.operatorArgs=this.operator=null;this.keyBuffer=[];this.registerName=null}function c(r,w){r.state.vim.inputState=new ya;m.signal(r,"vim-command-done",w)}function d(r,
w,F){this.clear();this.keyBuffer=[r||""];this.insertModeChanges=[];this.searchQueries=[];this.linewise=!!w;this.blockwise=!!F}function f(r){this.registers=r;this.unnamedRegister=r['"']=new d;r["."]=new d;r[":"]=new d;r["/"]=new d}function k(){this.historyBuffer=[];this.iterator=0;this.initialPrefix=null}function p(r,w){for(var F=[],Z=0;Z<w;Z++)F.push(r);return F}function v(r,w){var F=r.state.vim,Z=F.insertMode||F.visualMode;F=Math.min(Math.max(r.firstLine(),w.line),r.lastLine());r=Wa(r,F)-1+!!Z;return B(F,
Math.min(Math.max(0,w.ch),r))}function y(r){var w={},F;for(F in r)r.hasOwnProperty(F)&&(w[F]=r[F]);return w}function x(r,w,F){"object"===typeof w&&(F=w.ch,w=w.line);return B(r.line+w,r.ch+F)}function J(r,w,F){return function(){for(var Z=0;Z<F;Z++)w(r)}}function da(r){return B(r.line,r.ch)}function wa(r,w){return r.ch==w.ch&&r.line==w.line}function ca(r,w){return r.line<w.line||r.line==w.line&&r.ch<w.ch?!0:!1}function fa(r,w){2<arguments.length&&(w=fa.apply(void 0,Array.prototype.slice.call(arguments,
1)));return ca(r,w)?r:w}function Ha(r,w){2<arguments.length&&(w=Ha.apply(void 0,Array.prototype.slice.call(arguments,1)));return ca(r,w)?w:r}function Oa(r,w,F){r=ca(r,w);w=ca(w,F);return r&&w}function Wa(r,w){return r.getLine(w).length}function tb(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function gb(r,w,F){var Z=Wa(r,w);F=Array(F-Z+1).join(" ");r.setCursor(B(w,Z));r.replaceRange(F,r.getCursor())}function qb(r,w){var F=[],Z=r.listSelections(),sa=da(r.clipPos(w)),ta=!wa(w,sa),Ya;a:{var ib=
r.getCursor("head");for(Ya=0;Ya<Z.length;Ya++){var Qa=wa(Z[Ya].anchor,ib),lb=wa(Z[Ya].head,ib);if(Qa||lb)break a}Ya=-1}ib=wa(Z[Ya].head,Z[Ya].anchor);Qa=Z.length-1;var Ab=Qa-Ya>Ya?Qa:0;Ya=Z[Ab].anchor;var Kb=Math.min(Ya.line,sa.line);Qa=Math.max(Ya.line,sa.line);lb=Ya.ch;sa=sa.ch;Z=Z[Ab].head.ch-lb;Ab=sa-lb;0<Z&&0>=Ab?(lb++,ta||sa--):0>Z&&0<=Ab?(lb--,ib||sa++):0>Z&&-1==Ab&&(lb--,sa++);for(ta=Kb;ta<=Qa;ta++)Z={anchor:new B(ta,lb),head:new B(ta,sa)},F.push(Z);r.setSelections(F);w.ch=sa;Ya.ch=lb;return Ya}
function nb(r,w,F){for(var Z=[],sa=0;sa<F;sa++){var ta=x(w,sa,0);Z.push({anchor:ta,head:ta})}r.setSelections(Z,0)}function Ma(r,w){var F=w.lastSelection,Z=function(){var ta=r.listSelections(),Ya=ta[0];ta=ta[ta.length-1];Ya=ca(Ya.anchor,Ya.head)?Ya.anchor:Ya.head;ta=ca(ta.anchor,ta.head)?ta.head:ta.anchor;return[Ya,ta]},sa=function(){var ta=r.getCursor(),Ya=r.getCursor(),ib=F.visualBlock;if(ib){Ya=B(ta.line+ib.height,ta.ch+ib.width);ib=[];for(var Qa=ta.line;Qa<Ya.line;Qa++){var lb=B(Qa,ta.ch),Ab=B(Qa,
Ya.ch);ib.push({anchor:lb,head:Ab})}r.setSelections(ib)}else Qa=F.anchorMark.find(),lb=F.headMark.find(),ib=lb.line-Qa.line,Qa=lb.ch-Qa.ch,Ya={line:Ya.line+ib,ch:ib?Ya.ch:Qa+Ya.ch},F.visualLine&&(ta=B(ta.line,0),Ya=B(Ya.line,Wa(r,Ya.line))),r.setSelection(ta,Ya);return[ta,Ya]};return w.visualMode?Z():sa()}function fb(r,w){var F=w.sel.anchor,Z=w.sel.head;w.lastPastedText&&(Z=r.posFromIndex(r.indexFromPos(F)+w.lastPastedText.length),w.lastPastedText=null);w.lastSelection={anchorMark:r.setBookmark(F),
headMark:r.setBookmark(Z),anchor:da(F),head:da(Z),visualMode:w.visualMode,visualLine:w.visualLine,visualBlock:w.visualBlock}}function oa(r,w,F){var Z=r.state.vim;w=w||Z.sel;F=F||Z.visualLine?"line":Z.visualBlock?"block":"char";w=la(r,w,F);r.setSelections(w.ranges,w.primary);Bb(r)}function la(r,w,F,Z){var sa=da(w.head),ta=da(w.anchor);if("char"==F)return sa=Z||ca(w.head,w.anchor)?0:1,ta=ca(w.head,w.anchor)?1:0,sa=x(w.head,0,sa),ta=x(w.anchor,0,ta),{ranges:[{anchor:ta,head:sa}],primary:0};if("line"==
F)return ca(w.head,w.anchor)?(sa.ch=0,ta.ch=Wa(r,ta.line)):(ta.ch=0,w=r.lastLine(),sa.line>w&&(sa.line=w),sa.ch=Wa(r,sa.line)),{ranges:[{anchor:ta,head:sa}],primary:0};if("block"==F){w=Math.min(ta.line,sa.line);r=Math.min(ta.ch,sa.ch);F=Math.max(ta.ch,sa.ch)+1;ta=Math.max(ta.line,sa.line)-w+1;sa=sa.line==w?0:ta-1;Z=[];for(var Ya=0;Ya<ta;Ya++)Z.push({anchor:B(w+Ya,r),head:B(w+Ya,F)});return{ranges:Z,primary:sa}}}function ua(r,w){var F=r.state.vim;!1!==w&&r.setCursor(v(r,F.sel.head));fb(r,F);F.visualMode=
!1;F.visualLine=!1;F.visualBlock=!1;m.signal(r,"vim-mode-change",{mode:"normal"});yb(F)}function G(r){if(!r)return 0;var w=r.search(/\S/);return-1==w?r.length:w}function qa(r,w,F,Z,sa){F=r.getCursor("head");1==r.getSelection().length&&(F=fa(F,r.getCursor("anchor")));r=r.getLine(F.line);var ta=F.ch;for(sa=sa?Lb[0]:fd[0];!sa(r.charAt(ta));)if(ta++,ta>=r.length)return null;Z?sa=fd[0]:(sa=Lb[0],sa(r.charAt(ta))||(sa=Lb[1]));for(Z=ta;sa(r.charAt(Z))&&Z<r.length;)Z++;for(;sa(r.charAt(ta))&&0<=ta;)ta--;
ta++;if(w){for(w=Z;/\s/.test(r.charAt(Z))&&Z<r.length;)Z++;if(w==Z){for(w=ta;/\s/.test(r.charAt(ta-1))&&0<ta;)ta--;ta||(ta=w)}}return{start:B(F.line,ta),end:B(F.line,Z)}}function Aa(r,w){cc.lastCharacterSearch.increment=r;cc.lastCharacterSearch.forward=w.forward;cc.lastCharacterSearch.selectedCharacter=w.selectedCharacter}function Na(r,w,F,Z){for(var sa=r.getCursor(),ta=sa.ch,Ya,ib=0;ib<w;ib++){Ya=r.getLine(sa.line);var Qa=Z;Ya=F?Ya.indexOf(Qa,ta+1):Ya.lastIndexOf(Qa,ta-1);if(-1==Ya)return null;ta=
Ya}return B(r.getCursor().line,Ya)}function K(r,w,F,Z){ja(F,$d)&&(w.marks[F]&&w.marks[F].clear(),w.marks[F]=r.setBookmark(Z))}function D(r,w,F,Z,sa){function ta(lb,Ab,Kb){return Kb?!r.getLine(lb)!=!r.getLine(lb+Ab):!!r.getLine(lb)&&!r.getLine(lb+Ab)}w=w.line;var Ya=r.firstLine(),ib=r.lastLine(),Qa=w;if(Z){for(;Ya<=Qa&&Qa<=ib&&0<F;)ta(Qa,Z)&&F--,Qa+=Z;return new B(Qa,0)}Qa=r.state.vim;Qa.visualLine&&ta(w,1,!0)&&(Qa=Qa.sel.anchor,ta(Qa.line,-1,!0)&&(sa&&Qa.line==w||(w+=1)));Z=!r.getLine(w);for(Qa=w;Qa<=
ib&&F;Qa++)ta(Qa,1,!0)&&(sa&&!r.getLine(Qa)==Z||F--);F=new B(Qa,0);Qa>ib&&!Z?Z=!0:sa=!1;for(Qa=w;Qa>Ya&&(sa&&!r.getLine(Qa)!=Z&&Qa!=w||!ta(Qa,-1,!0));Qa--);return{start:new B(Qa,0),end:F}}function U(r,w,F,Z){function sa(ib,Qa){0>Qa.pos+Qa.dir||Qa.pos+Qa.dir>=Qa.line.length?(Qa.ln+=Qa.dir,aa(ib,Qa.ln)?(Qa.line=ib.getLine(Qa.ln),Qa.pos=0<Qa.dir?0:Qa.line.length-1):(Qa.line=null,Qa.ln=null,Qa.pos=null)):Qa.pos+=Qa.dir}function ta(ib,Qa,lb,Ab){var Kb=ib.getLine(Qa),rc=""===Kb;Kb={line:Kb,ln:Qa,pos:lb,
dir:Ab};Qa={ln:Kb.ln,pos:Kb.pos};lb=""===Kb.line;for(sa(ib,Kb);null!==Kb.line;){Qa.ln=Kb.ln;Qa.pos=Kb.pos;if(""!==Kb.line||lb){if(rc&&""!==Kb.line&&!R(Kb.line[Kb.pos]))return{ln:Kb.ln,pos:Kb.pos};-1==".?!".indexOf(Kb.line[Kb.pos])||rc||Kb.pos!==Kb.line.length-1&&!R(Kb.line[Kb.pos+1])||(rc=!0)}else return{ln:Kb.ln,pos:Kb.pos};sa(ib,Kb)}Kb=ib.getLine(Qa.ln);Qa.pos=0;for(ib=Kb.length-1;0<=ib;--ib)if(!R(Kb[ib])){Qa.pos=ib;break}return Qa}function Ya(ib,Qa,lb,Ab){var Kb=ib.getLine(Qa);Kb={line:Kb,ln:Qa,
pos:lb,dir:Ab};Qa={ln:Kb.ln,pos:null};lb=""===Kb.line;for(sa(ib,Kb);null!==Kb.line;){if(""!==Kb.line||lb){if(-1!=".?!".indexOf(Kb.line[Kb.pos])&&null!==Qa.pos&&(Kb.ln!==Qa.ln||Kb.pos+1!==Qa.pos))return Qa;""===Kb.line||R(Kb.line[Kb.pos])||(lb=!1,Qa={ln:Kb.ln,pos:Kb.pos})}else return null!==Qa.pos?Qa:{ln:Kb.ln,pos:Kb.pos};sa(ib,Kb)}Kb=ib.getLine(Qa.ln);for(ib=Qa.pos=0;ib<Kb.length;++ib)if(!R(Kb[ib])){Qa.pos=ib;break}return Qa}for(w={ln:w.line,pos:w.ch};0<F;)w=0>Z?Ya(r,w.ln,w.pos,Z):ta(r,w.ln,w.pos,
Z),F--;return B(w.ln,w.pos)}function ma(){}function Ta(r){r=r.state.vim;return r.searchState_||(r.searchState_=new ma)}function za(r,w){w=Ia(r,w)||[];if(!w.length)return[];var F=[];if(0===w[0]){for(var Z=0;Z<w.length;Z++)"number"==typeof w[Z]&&F.push(r.substring(w[Z]+1,w[Z+1]));return F}}function Ia(r,w){w||(w="/");for(var F=!1,Z=[],sa=0;sa<r.length;sa++){var ta=r.charAt(sa);F||ta!=w||Z.push(sa);F=!F&&"\\"==ta}return Z}function Pa(r,w){r.openNotification?r.openNotification('\x3cspan style\x3d"color: red"\x3e'+
w+"\x3c/span\x3e",{bottom:!0,duration:5E3}):alert(w)}function rb(r,w){var F=(w.prefix||"")+" "+(w.desc||""),Z=w.desc,sa='\x3cspan style\x3d"font-family: monospace; white-space: pre"\x3e'+(w.prefix||"")+'\x3cinput type\x3d"text" autocorrect\x3d"off" autocapitalize\x3d"off" spellcheck\x3d"false"\x3e\x3c/span\x3e';Z&&(sa+=' \x3cspan style\x3d"color: #888"\x3e'+Z+"\x3c/span\x3e");Z=w.onClose;r.openDialog?r.openDialog(sa,Z,{bottom:!0,value:w.value,onKeyDown:w.onKeyDown,onKeyUp:w.onKeyUp,selectValueOnOpen:!1}):
Z(prompt(F,""))}function wb(r,w,F,Z){if(w){var sa=Ta(r);F=!!F;Z=!!Z;cc.registerController.getRegister("/").setText(w);if(w instanceof RegExp)var ta=w;else{var Ya=Ia(w,"/");if(Ya.length){var ib=w.substring(0,Ya[0]);ta=-1!=w.substring(Ya[0]).indexOf("i")}else ib=w;if(ib){if(!Y("pcre")){w=ib;Ya=!1;ib=[];for(var Qa=-1;Qa<w.length;Qa++){var lb=w.charAt(Qa)||"",Ab=w.charAt(Qa+1)||"",Kb=Ab&&-1!="|(){".indexOf(Ab);Ya?("\\"===lb&&Kb||ib.push(lb),Ya=!1):"\\"===lb?(Ya=!0,Ab&&-1!="}".indexOf(Ab)&&(Kb=!0),Kb&&
"\\"!==Ab||ib.push(lb)):(ib.push(lb),Kb&&"\\"!==Ab&&ib.push("\\"))}ib=ib.join("")}Z&&(F=/^[^A-Z]*$/.test(ib));ta=new RegExp(ib,F||ta?"i":void 0)}else ta=null}if(ta){Gb(r,ta);a:if(r=sa.getQuery(),ta instanceof RegExp&&r instanceof RegExp){F=["global","multiline","ignoreCase","source"];for(Z=0;Z<F.length;Z++)if(w=F[Z],ta[w]!==r[w]){r=!1;break a}r=!0}else r=!1;if(r)return ta;sa.setQuery(ta);return ta}}}function Cb(r){if("^"==r.source.charAt(0))var w=!0;return{token:function(F){if(w&&!F.sol())F.skipToEnd();
else{var Z=F.match(r,!1);if(Z){if(0==Z[0].length)return F.next(),"searching";if(!F.sol()&&(F.backUp(1),!r.exec(F.next()+Z[0])))return F.next(),null;F.match(r);return"searching"}for(;!F.eol()&&(F.next(),!F.match(r,!1)););}},query:r}}function Gb(r,w){clearTimeout(hc);hc=setTimeout(function(){var F=Ta(r),Z=F.getOverlay();Z&&w==Z.query||(Z&&r.removeOverlay(Z),Z=Cb(w),r.addOverlay(Z),r.showMatchesOnScrollbar&&(F.getScrollbarAnnotate()&&F.getScrollbarAnnotate().clear(),F.setScrollbarAnnotate(r.showMatchesOnScrollbar(w))),
F.setOverlay(Z))},50)}function gc(r,w,F,Z){void 0===Z&&(Z=1);return r.operation(function(){for(var sa=r.getCursor(),ta=r.getSearchCursor(F,sa),Ya=0;Ya<Z;Ya++){var ib=ta.find(w);0==Ya&&ib&&wa(ta.from(),sa)&&(ib=ta.find(w));if(!ib&&(ta=r.getSearchCursor(F,w?B(r.lastLine()):B(r.firstLine(),0)),!ta.find(w)))return}return ta.from()})}function $b(r){var w=Ta(r);r.removeOverlay(Ta(r).getOverlay());w.setOverlay(null);w.getScrollbarAnnotate()&&(w.getScrollbarAnnotate().clear(),w.setScrollbarAnnotate(null))}
function Rb(r,w,F){"number"!=typeof r&&(r=r.line);return w instanceof Array?ja(r,w):F?r>=w&&r<=F:r==w}function Ga(r){var w=r.getScrollInfo(),F=r.coordsChar({left:0,top:6+w.top},"local");r=r.coordsChar({left:0,top:w.clientHeight-10+w.top},"local");return{top:F.line,bottom:r.line}}function bb(r,w,F){return"'"==F||"`"==F?cc.jumpList.find(r,-1)||B(0,0):"."==F?Eb(r):(r=w.marks[F])&&r.find()}function Eb(r){r=r.doc.history.done;for(var w=r.length;w--;)if(r[w].changes)return da(r[w].changes[0].to)}function V(r,
w,F,Z,sa,ta,Ya,ib,Qa){function lb(){r.operation(function(){for(;!xc;)Ab(),Kb();rc()})}function Ab(){var Dc=r.getRange(ta.from(),ta.to()).replace(Ya,ib);ta.replace(Dc)}function Kb(){for(;ta.findNext()&&Rb(ta.from(),Z,sa);)if(F||!bc||ta.from().line!=bc.line){r.scrollIntoView(ta.from(),30);r.setSelection(ta.from(),ta.to());bc=ta.from();xc=!1;return}xc=!0}function rc(Dc){Dc&&Dc();r.focus();bc&&(r.setCursor(bc),Dc=r.state.vim,Dc.exMode=!1,Dc.lastHPos=Dc.lastHSPos=bc.ch);Qa&&Qa()}r.state.vim.exMode=!0;
var xc=!1,bc=ta.from();Kb();xc?Pa(r,"No matches for "+Ya.source):w?rb(r,{prefix:"replace with \x3cstrong\x3e"+ib+"\x3c/strong\x3e (y/n/a/q/l)",onKeyDown:function(Dc,Rc,Lc){m.e_stop(Dc);switch(m.keyName(Dc)){case "Y":Ab();Kb();break;case "N":Kb();break;case "A":Dc=Qa;Qa=void 0;r.operation(lb);Qa=Dc;break;case "L":Ab();case "Q":case "Esc":case "Ctrl-C":case "Ctrl-[":rc(Lc)}xc&&rc(Lc);return!0}}):(lb(),Qa&&Qa())}function Ba(r){var w=r.state.vim,F=cc.macroModeState,Z=cc.registerController.getRegister("."),
sa=F.isPlaying,ta=F.lastInsertModeChanges;sa||(r.off("change",ub),m.off(r.getInputField(),"keydown",Vb));!sa&&1<w.insertModeRepeat&&(sb(r,w,w.insertModeRepeat-1,!0),w.lastEditInputState.repeatOverride=w.insertModeRepeat);delete w.insertModeRepeat;w.insertMode=!1;r.setCursor(r.getCursor().line,r.getCursor().ch-1);r.setOption("keyMap","vim");r.setOption("disableInput",!0);r.toggleOverwrite(!1);Z.setText(ta.changes.join(""));m.signal(r,"vim-mode-change",{mode:"normal"});F.isRecording&&(F.isPlaying||
(r=cc.registerController.getRegister(F.latestRegister))&&r.pushInsertModeChanges&&r.pushInsertModeChanges(F.lastInsertModeChanges))}function db(r){ka.unshift(r)}function ub(r,w){var F=cc.macroModeState,Z=F.lastInsertModeChanges;if(!F.isPlaying)for(;w;){Z.expectCursorActivityForChange=!0;if(1<Z.ignoreCount)Z.ignoreCount--;else if("+input"==w.origin||"paste"==w.origin||void 0===w.origin)F=r.listSelections().length,1<F&&(Z.ignoreCount=F),F=w.text.join("\n"),Z.maybeReset&&(Z.changes=[],Z.maybeReset=!1),
F&&(r.state.overwrite&&!/\n/.test(F)?Z.changes.push([F]):Z.changes.push(F));w=w.next}}function ob(r){var w=r.state.vim;if(w.insertMode){var F=cc.macroModeState;if(F.isPlaying)return;F=F.lastInsertModeChanges;F.expectCursorActivityForChange?F.expectCursorActivityForChange=!1:F.maybeReset=!0}else if(!r.curOp.isVimOp){F=r.getCursor("anchor");var Z=r.getCursor("head");w.visualMode&&!r.somethingSelected()?ua(r,!1):w.visualMode||w.insertMode||!r.somethingSelected()||(w.visualMode=!0,w.visualLine=!1,m.signal(r,
"vim-mode-change",{mode:"visual"}));if(w.visualMode){var sa=ca(Z,F)?0:-1,ta=ca(Z,F)?-1:0;Z=x(Z,0,sa);F=x(F,0,ta);w.sel={anchor:F,head:Z};K(r,w,"\x3c",fa(Z,F));K(r,w,"\x3e",Ha(Z,F))}else w.insertMode||(w.lastHPos=r.getCursor().ch)}w.visualMode&&Bb(r)}function Bb(r){var w=r.state.vim,F=v(r,da(w.sel.head)),Z=x(F,0,1);yb(w);F.ch==r.getLine(F.line).length?(Z=document.createElement("span"),Z.textContent=" ",Z.className="cm-animate-fat-cursor",w.fakeCursorBookmark=r.setBookmark(F,{widget:Z})):w.fakeCursor=
r.markText(F,Z,{className:"cm-animate-fat-cursor"})}function yb(r){r.fakeCursor&&(r.fakeCursor.clear(),r.fakeCursor=null);r.fakeCursorBookmark&&(r.fakeCursorBookmark.clear(),r.fakeCursorBookmark=null)}function Db(r){this.keyName=r}function Vb(r){function w(){F.maybeReset&&(F.changes=[],F.maybeReset=!1);F.changes.push(new Db(Z));return!0}var F=cc.macroModeState.lastInsertModeChanges,Z=m.keyName(r);Z&&(-1==Z.indexOf("Delete")&&-1==Z.indexOf("Backspace")||m.lookupKey(Z,"vim-insert",w))}function sb(r,
w,F,Z){function sa(){ib?zb.processAction(r,w,w.lastEditActionCommand):zb.evalInput(r,w)}function ta(Ab){0<Ya.lastInsertModeChanges.changes.length&&(Ab=w.lastEditActionCommand?Ab:1,oc(r,Ya.lastInsertModeChanges.changes,Ab))}var Ya=cc.macroModeState;Ya.isPlaying=!0;var ib=!!w.lastEditActionCommand,Qa=w.inputState;w.inputState=w.lastEditInputState;if(ib&&w.lastEditActionCommand.interlaceInsertRepeat)for(var lb=0;lb<F;lb++)sa(),ta(1);else Z||sa(),ta(F);w.inputState=Qa;w.insertMode&&!Z&&Ba(r);Ya.isPlaying=
!1}function oc(r,w,F){function Z(Kb){if("string"==typeof Kb)m.commands[Kb](r);else Kb(r);return!0}var sa=r.getCursor("head"),ta=cc.macroModeState.lastInsertModeChanges.visualBlock;ta&&(nb(r,sa,ta+1),F=r.listSelections().length,r.setCursor(sa));for(var Ya=0;Ya<F;Ya++){ta&&r.setCursor(x(sa,Ya,0));for(var ib=0;ib<w.length;ib++){var Qa=w[ib];if(Qa instanceof Db)m.lookupKey(Qa.keyName,"vim-insert",Z);else if("string"==typeof Qa){var lb=r.getCursor();r.replaceRange(Qa,lb,lb)}else{lb=r.getCursor();var Ab=
x(lb,0,Qa[0].length);r.replaceRange(Qa[0],lb,Ab)}}}ta&&r.setCursor(x(sa,0,1))}m.defineOption("vimMode",!1,function(r,w,F){w&&"vim"!=r.getOption("keyMap")?r.setOption("keyMap","vim"):!w&&F!=m.Init&&/^vim/.test(r.getOption("keyMap"))&&r.setOption("keyMap","default")});var uc={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A"},Va={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"},ab=/[\d]/,Lb=[m.isWordChar,function(r){return r&&!m.isWordChar(r)&&!/\s/.test(r)}],fd=[function(r){return/\S/.test(r)}],Yc=W(65,
26),Bc=W(97,26),Zc=W(48,10),$d=[].concat(Yc,Bc,Zc,["\x3c","\x3e"]),Zd=[].concat(Yc,Bc,Zc,["-",'"',".",":","/"]),wd={};N("filetype",void 0,"string",["ft"],function(r,w){if(void 0!==w){if(void 0===r)return r=w.getOption("mode"),"null"==r?"":r;w.setOption("mode",""==r?"null":r)}});var Md=function(){function r(ta,Ya){w+=Ya;w>F?w=F:w<Z&&(w=Z);var ib=sa[(100+w)%100];if(ib&&!ib.find()){Ya=0<Ya?1:-1;var Qa;ta=ta.getCursor();do if(w+=Ya,(ib=sa[(100+w)%100])&&(Qa=ib.find())&&!wa(ta,Qa))break;while(w<F&&w>Z)}return ib}
var w=-1,F=0,Z=0,sa=Array(100);return{cachedCursor:void 0,add:function(ta,Ya,ib){function Qa(Ab){var Kb=++w%100,rc=sa[Kb];rc&&rc.clear();sa[Kb]=ta.setBookmark(Ab)}var lb=sa[w%100];lb?(lb=lb.find())&&!wa(lb,Ya)&&Qa(Ya):Qa(Ya);Qa(ib);F=w;Z=w-100+1;0>Z&&(Z=0)},find:function(ta,Ya){var ib=w;ta=r(ta,Ya);w=ib;return ta&&ta.find()},move:r}},pd=function(r){return r?{changes:r.changes,expectCursorActivityForChange:r.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};E.prototype=
{exitMacroRecordMode:function(){var r=cc.macroModeState;if(r.onRecordingDone)r.onRecordingDone();r.onRecordingDone=void 0;r.isRecording=!1},enterMacroRecordMode:function(r,w){var F=cc.registerController.getRegister(w);F&&(F.clear(),this.latestRegister=w,r.openDialog&&(this.onRecordingDone=r.openDialog("(recording)["+w+"]",null,{bottom:!0})),this.isRecording=!0)}};var cc,xa,Za={buildKeyMap:function(){},getRegisterController:function(){return cc.registerController},resetVimGlobalState_:ra,getVimGlobalState_:function(){return cc},
maybeInitVimState_:X,suppressErrorLogging:!1,InsertModeKey:Db,map:function(r,w,F){Ub.map(r,w,F)},unmap:function(r,w){Ub.unmap(r,w)},noremap:function(r,w,F){function Z(Kb){return Kb?[Kb]:["normal","insert","visual"]}for(var sa=Z(F),ta=ka.length,Ya=ta-Fa;Ya<ta&&sa.length;Ya++){var ib=ka[Ya];if(!(ib.keys!=w||F&&ib.context&&ib.context!==F)&&"ex"!==ib.type.substr(0,2)&&"key"!==ib.type.substr(0,3)){var Qa={},lb;for(lb in ib)Qa[lb]=ib[lb];Qa.keys=r;F&&!Qa.context&&(Qa.context=F);this._mapCommand(Qa);var Ab=
Z(ib.context);sa=sa.filter(function(Kb){return-1===Ab.indexOf(Kb)})}}},mapclear:function(r){var w=ka.length,F=ka.slice(0,w-Fa);ka=ka.slice(w-Fa);if(r)for(w=F.length-1;0<=w;w--){var Z=F[w];if(r!==Z.context)if(Z.context)this._mapCommand(Z);else{var sa=["normal","insert","visual"],ta;for(ta in sa)if(sa[ta]!==r){var Ya={},ib;for(ib in Z)Ya[ib]=Z[ib];Ya.context=sa[ta];this._mapCommand(Ya)}}}},setOption:O,getOption:Y,defineOption:N,defineEx:function(r,w,F){if(!w)w=r;else if(0!==r.indexOf(w))throw Error('(Vim.defineEx) "'+
w+'" is not a prefix of "'+r+'", command not registered');dc[r]=F;Ub.commandMap_[w]={name:r,shortName:w,type:"api"}},handleKey:function(r,w,F){r=this.findKey(r,w,F);if("function"===typeof r)return r()},findKey:function(r,w,F){function Z(){if("\x3cEsc\x3e"==w)return c(r),Ya.visualMode?ua(r):Ya.insertMode&&Ba(r),!0}function sa(){if(Z())return!0;for(var Qa=Ya.inputState.keyBuffer+=w,lb=1==w.length,Ab=zb.matchCommand(Qa,ka,Ya.inputState,"insert");1<Qa.length&&"full"!=Ab.type;){Qa=Ya.inputState.keyBuffer=
Qa.slice(1);var Kb=zb.matchCommand(Qa,ka,Ya.inputState,"insert");"none"!=Kb.type&&(Ab=Kb)}if("none"==Ab.type)return c(r),!1;if("partial"==Ab.type)return xa&&window.clearTimeout(xa),xa=window.setTimeout(function(){Ya.insertMode&&Ya.inputState.keyBuffer&&c(r)},Y("insertModeEscKeysTimeout")),!lb;xa&&window.clearTimeout(xa);if(lb){lb=r.listSelections();for(Kb=0;Kb<lb.length;Kb++){var rc=lb[Kb].head;r.replaceRange("",x(rc,0,-(Qa.length-1)),rc,"+input")}cc.macroModeState.lastInsertModeChanges.changes.pop()}c(r);
return Ab.command}function ta(){if(w.startsWith("\x3cA-")||w.startsWith("\x3cS-A-"))return!1;a:{var Qa=cc.macroModeState;if(Qa.isRecording){if("q"==w){Qa.exitMacroRecordMode();c(r);var lb=!0;break a}"mapping"!=F&&(lb=w,Qa.isPlaying||(Qa=cc.registerController.getRegister(Qa.latestRegister))&&Qa.pushText(lb))}lb=void 0}if(lb||Z())return!0;lb=Ya.inputState.keyBuffer+=w;if(/^[1-9]\d*$/.test(lb))return!0;Qa=/^(\d*)(.*)$/.exec(lb);if(!Qa)return c(r),!1;var Ab=zb.matchCommand(Qa[2]||Qa[1],ka,Ya.inputState,
Ya.visualMode?"visual":"normal");if("none"==Ab.type)return c(r),!1;if("partial"==Ab.type)return!0;Ya.inputState.keyBuffer="";Qa=/^(\d*)(.*)$/.exec(lb);Qa[1]&&"0"!=Qa[1]&&Ya.inputState.pushRepeatDigit(Qa[1]);return Ab.command}var Ya=X(r);var ib=Ya.insertMode?sa():ta();return!1===ib?Ya.insertMode||1!==w.length?void 0:function(){return!0}:!0===ib?function(){return!0}:function(){return r.operation(function(){r.curOp.isVimOp=!0;try{if("keyToKey"==ib.type)for(var Qa=ib.toKeys,lb;Qa;)lb=/<\w+-.+?>|<\w+>|./.exec(Qa),
w=lb[0],Qa=Qa.substring(lb.index+w.length),m.Vim.handleKey(r,w,"mapping");else zb.processCommand(r,Ya,ib)}catch(Ab){throw r.state.vim=void 0,X(r),m.Vim.suppressErrorLogging||console.log(Ab),Ab;}return!0})}},handleEx:function(r,w){Ub.processCommand(r,w)},defineMotion:function(r,w){Ob[r]=w},defineAction:function(r,w){Xb[r]=w},defineOperator:function(r,w){Wb[r]=w},mapCommand:function(r,w,F,Z,sa){r={keys:r,type:w};r[w]=F;r[w+"Args"]=Z;for(var ta in sa)r[ta]=sa[ta];db(r)},_mapCommand:db,defineRegister:function(r,
w){var F=cc.registerController.registers;if(!r||1!=r.length)throw Error("Register name must be 1 character");if(F[r])throw Error("Register already defined "+r);F[r]=w;Zd.push(r)},exitVisualMode:ua,exitInsertMode:Ba};ya.prototype.pushRepeatDigit=function(r){this.operator?this.motionRepeat=this.motionRepeat.concat(r):this.prefixRepeat=this.prefixRepeat.concat(r)};ya.prototype.getRepeat=function(){var r=0;if(0<this.prefixRepeat.length||0<this.motionRepeat.length)r=1,0<this.prefixRepeat.length&&(r*=parseInt(this.prefixRepeat.join(""),
10)),0<this.motionRepeat.length&&(r*=parseInt(this.motionRepeat.join(""),10));return r};d.prototype={setText:function(r,w,F){this.keyBuffer=[r||""];this.linewise=!!w;this.blockwise=!!F},pushText:function(r,w){w&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0);this.keyBuffer.push(r)},pushInsertModeChanges:function(r){this.insertModeChanges.push(pd(r))},pushSearchQuery:function(r){this.searchQueries.push(r)},clear:function(){this.keyBuffer=[];this.insertModeChanges=[];this.searchQueries=
[];this.linewise=!1},toString:function(){return this.keyBuffer.join("")}};f.prototype={pushText:function(r,w,F,Z,sa){Z&&"\n"!==F.charAt(F.length-1)&&(F+="\n");var ta=this.isValidRegister(r)?this.getRegister(r):null;if(ta)H(r)?ta.pushText(F,Z):ta.setText(F,Z,sa),this.unnamedRegister.setText(ta.toString(),Z);else{switch(w){case "yank":this.registers["0"]=new d(F,Z,sa);break;case "delete":case "change":-1==F.indexOf("\n")?this.registers["-"]=new d(F,Z):(this.shiftNumericRegisters_(),this.registers["1"]=
new d(F,Z))}this.unnamedRegister.setText(F,Z,sa)}},getRegister:function(r){if(!this.isValidRegister(r))return this.unnamedRegister;r=r.toLowerCase();this.registers[r]||(this.registers[r]=new d);return this.registers[r]},isValidRegister:function(r){return r&&ja(r,Zd)},shiftNumericRegisters_:function(){for(var r=9;2<=r;r--)this.registers[r]=this.getRegister(""+(r-1))}};k.prototype={nextMatch:function(r,w){var F=this.historyBuffer,Z=w?-1:1;null===this.initialPrefix&&(this.initialPrefix=r);for(var sa=
this.iterator+Z;w?0<=sa:sa<F.length;sa+=Z)for(var ta=F[sa],Ya=0;Ya<=ta.length;Ya++)if(this.initialPrefix==ta.substring(0,Ya))return this.iterator=sa,ta;if(sa>=F.length)return this.iterator=F.length,this.initialPrefix;if(0>sa)return r},pushInput:function(r){var w=this.historyBuffer.indexOf(r);-1<w&&this.historyBuffer.splice(w,1);r.length&&this.historyBuffer.push(r)},reset:function(){this.initialPrefix=null;this.iterator=this.historyBuffer.length}};var zb={matchCommand:function(r,w,F,Z){var sa=[];var ta=
[];for(var Ya=0;Ya<w.length;Ya++){var ib=w[Ya],Qa;if(Qa=!("insert"==Z&&"insert"!=ib.context||ib.context&&ib.context!=Z||F.operator&&"action"==ib.type)){var lb=r;var Ab=ib.keys;if("\x3ccharacter\x3e"==Ab.slice(-11)){Qa=Ab.length-11;var Kb=lb.slice(0,Qa);Ab=Ab.slice(0,Qa);lb=Kb==Ab&&lb.length>Qa?"full":0==Ab.indexOf(Kb)?"partial":!1}else lb=lb==Ab?"full":0==Ab.indexOf(lb)?"partial":!1;Qa=lb}Qa&&("partial"==lb&&sa.push(ib),"full"==lb&&ta.push(ib))}w=sa.length&&sa;ta=ta.length&&ta;if(!ta&&!w)return{type:"none"};
if(!ta&&w)return{type:"partial"};var rc;for(w=0;w<ta.length;w++)Z=ta[w],rc||(rc=Z);if("\x3ccharacter\x3e"==rc.keys.slice(-11)){r=(ta=/^.*(<[^>]+>)$/.exec(r))?ta[1]:r.slice(-1);if(1<r.length)switch(r){case "\x3cCR\x3e":r="\n";break;case "\x3cSpace\x3e":r=" ";break;default:r=""}if(!r)return{type:"none"};F.selectedCharacter=r}return{type:"full",command:rc}},processCommand:function(r,w,F){w.inputState.repeatOverride=F.repeatOverride;switch(F.type){case "motion":this.processMotion(r,w,F);break;case "operator":this.processOperator(r,
w,F);break;case "operatorMotion":this.processOperatorMotion(r,w,F);break;case "action":this.processAction(r,w,F);break;case "search":this.processSearch(r,w,F);break;case "ex":case "keyToEx":this.processEx(r,w,F)}},processMotion:function(r,w,F){w.inputState.motion=F.motion;w.inputState.motionArgs=y(F.motionArgs);this.evalInput(r,w)},processOperator:function(r,w,F){var Z=w.inputState;if(Z.operator){if(Z.operator==F.operator){Z.motion="expandToLine";Z.motionArgs={linewise:!0};this.evalInput(r,w);return}c(r)}Z.operator=
F.operator;Z.operatorArgs=y(F.operatorArgs);F.exitVisualBlock&&(w.visualBlock=!1,oa(r));w.visualMode&&this.evalInput(r,w)},processOperatorMotion:function(r,w,F){var Z=w.visualMode,sa=y(F.operatorMotionArgs);sa&&Z&&sa.visualLine&&(w.visualLine=!0);this.processOperator(r,w,F);Z||this.processMotion(r,w,F)},processAction:function(r,w,F){var Z=w.inputState,sa=Z.getRepeat(),ta=!!sa,Ya=y(F.actionArgs)||{};Z.selectedCharacter&&(Ya.selectedCharacter=Z.selectedCharacter);F.operator&&this.processOperator(r,
w,F);F.motion&&this.processMotion(r,w,F);(F.motion||F.operator)&&this.evalInput(r,w);Ya.repeat=sa||1;Ya.repeatIsExplicit=ta;Ya.registerName=Z.registerName;c(r);w.lastMotion=null;F.isEdit&&this.recordLastEdit(w,Z,F);Xb[F.action](r,Ya,w)},processSearch:function(r,w,F){function Z(bc,Dc,Rc){cc.searchHistoryController.pushInput(bc);cc.searchHistoryController.reset();try{wb(r,bc,Dc,Rc)}catch(Lc){Pa(r,"Invalid regex: "+bc);c(r);return}zb.processMotion(r,w,{type:"motion",motion:"findNext",motionArgs:{forward:!0,
toJumplist:F.searchArgs.toJumplist}})}function sa(bc){r.scrollTo(Kb.left,Kb.top);Z(bc,!0,!0);var Dc=cc.macroModeState;Dc.isRecording&&(Dc.isPlaying||(Dc=cc.registerController.getRegister(Dc.latestRegister))&&Dc.pushSearchQuery&&Dc.pushSearchQuery(bc))}function ta(bc,Dc,Rc){var Lc=m.keyName(bc);if("Up"==Lc||"Down"==Lc){var ed=bc.target?bc.target.selectionEnd:0;Dc=cc.searchHistoryController.nextMatch(Dc,"Up"==Lc?!0:!1)||"";Rc(Dc);ed&&bc.target&&(bc.target.selectionEnd=bc.target.selectionStart=Math.min(ed,
bc.target.value.length))}else"Left"!=Lc&&"Right"!=Lc&&"Ctrl"!=Lc&&"Alt"!=Lc&&"Shift"!=Lc&&cc.searchHistoryController.reset();try{var Sc=wb(r,Dc,!0,!0)}catch(sc){}Sc?r.scrollIntoView(gc(r,!ib,Sc),30):($b(r),r.scrollTo(Kb.left,Kb.top))}function Ya(bc,Dc,Rc){var Lc=m.keyName(bc);"Esc"==Lc||"Ctrl-C"==Lc||"Ctrl-["==Lc||"Backspace"==Lc&&""==Dc?(cc.searchHistoryController.pushInput(Dc),cc.searchHistoryController.reset(),wb(r,Ab),$b(r),r.scrollTo(Kb.left,Kb.top),m.e_stop(bc),c(r),Rc(),r.focus()):"Up"==Lc||
"Down"==Lc?m.e_stop(bc):"Ctrl-U"==Lc&&(m.e_stop(bc),Rc(""))}if(r.getSearchCursor){var ib=F.searchArgs.forward,Qa=F.searchArgs.wholeWordOnly;Ta(r).setReversed(!ib);var lb=ib?"/":"?",Ab=Ta(r).getQuery(),Kb=r.getScrollInfo();switch(F.searchArgs.querySrc){case "prompt":Qa=cc.macroModeState;Qa.isPlaying?(lb=Qa.replaySearchQueries.shift(),Z(lb,!0,!1)):rb(r,{onClose:sa,prefix:lb,desc:Sb,onKeyUp:ta,onKeyDown:Ya});break;case "wordUnderCursor":var rc=qa(r,!1,!0,!1,!0),xc=!0;rc||(rc=qa(r,!1,!0,!1,!1),xc=!1);
rc&&(lb=r.getLine(rc.start.line).substring(rc.start.ch,rc.end.ch),lb=xc&&Qa?"\\b"+lb+"\\b":lb.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1"),cc.jumpList.cachedCursor=r.getCursor(),r.setCursor(rc.start),Z(lb,!0,!1))}}},processEx:function(r,w,F){function Z(ta){cc.exCommandHistoryController.pushInput(ta);cc.exCommandHistoryController.reset();Ub.processCommand(r,ta)}function sa(ta,Ya,ib){var Qa=m.keyName(ta);if("Esc"==Qa||"Ctrl-C"==Qa||"Ctrl-["==Qa||"Backspace"==Qa&&""==Ya)cc.exCommandHistoryController.pushInput(Ya),
cc.exCommandHistoryController.reset(),m.e_stop(ta),c(r),ib(),r.focus();if("Up"==Qa||"Down"==Qa){m.e_stop(ta);var lb=ta.target?ta.target.selectionEnd:0;Ya=cc.exCommandHistoryController.nextMatch(Ya,"Up"==Qa?!0:!1)||"";ib(Ya);lb&&ta.target&&(ta.target.selectionEnd=ta.target.selectionStart=Math.min(lb,ta.target.value.length))}else"Ctrl-U"==Qa?(m.e_stop(ta),ib("")):"Left"!=Qa&&"Right"!=Qa&&"Ctrl"!=Qa&&"Alt"!=Qa&&"Shift"!=Qa&&cc.exCommandHistoryController.reset()}"keyToEx"==F.type?Ub.processCommand(r,
F.exArgs.input):w.visualMode?rb(r,{onClose:Z,prefix:":",value:"'\x3c,'\x3e",onKeyDown:sa,selectValueOnOpen:!1}):rb(r,{onClose:Z,prefix:":",onKeyDown:sa})},evalInput:function(r,w){var F=w.inputState,Z=F.motion,sa=F.motionArgs||{},ta=F.operator,Ya=F.operatorArgs||{},ib=F.registerName,Qa=w.sel,lb=da(w.visualMode?v(r,Qa.head):r.getCursor("head")),Ab=da(w.visualMode?v(r,Qa.anchor):r.getCursor("anchor")),Kb=da(lb);Ab=da(Ab);ta&&this.recordLastEdit(w,F);var rc=void 0!==F.repeatOverride?F.repeatOverride:
F.getRepeat();if(0<rc&&sa.explicitRepeat)sa.repeatIsExplicit=!0;else if(sa.noRepeat||!sa.explicitRepeat&&0===rc)rc=1,sa.repeatIsExplicit=!1;F.selectedCharacter&&(sa.selectedCharacter=Ya.selectedCharacter=F.selectedCharacter);sa.repeat=rc;c(r);if(Z){var xc=Ob[Z](r,lb,sa,w);w.lastMotion=Ob[Z];if(!xc)return;sa.toJumplist&&(Z=cc.jumpList,(F=Z.cachedCursor)?(wa(F,xc)||cc.jumpList.add(r,F,xc),delete Z.cachedCursor):wa(lb,xc)||cc.jumpList.add(r,lb,xc));if(xc instanceof Array){var bc=xc[0];xc=xc[1]}xc||(xc=
da(lb));w.visualMode?(w.visualBlock&&Infinity===xc.ch||(xc=v(r,xc)),bc&&(bc=v(r,bc)),bc=bc||Ab,Qa.anchor=bc,Qa.head=xc,oa(r),K(r,w,"\x3c",ca(bc,xc)?bc:xc),K(r,w,"\x3e",ca(bc,xc)?xc:bc)):ta||(xc=v(r,xc),r.setCursor(xc.line,xc.ch))}if(ta){Ya.lastSel?(bc=Ab,Qa=Ya.lastSel,xc=Math.abs(Qa.head.line-Qa.anchor.line),lb=Math.abs(Qa.head.ch-Qa.anchor.ch),xc=Qa.visualLine?B(Ab.line+xc,Ab.ch):Qa.visualBlock?B(Ab.line+xc,Ab.ch+lb):Qa.head.line==Qa.anchor.line?B(Ab.line,Ab.ch+lb):B(Ab.line+xc,Ab.ch),w.visualMode=
!0,w.visualLine=Qa.visualLine,w.visualBlock=Qa.visualBlock,Qa=w.sel={anchor:bc,head:xc},oa(r)):w.visualMode&&(Ya.lastSel={anchor:da(Qa.anchor),head:da(Qa.head),visualBlock:w.visualBlock,visualLine:w.visualLine});if(w.visualMode){if(bc=fa(Qa.head,Qa.anchor),Qa=Ha(Qa.head,Qa.anchor),Kb=w.visualLine||Ya.linewise,sa=w.visualBlock?"block":Kb?"line":"char",bc=la(r,{anchor:bc,head:Qa},sa),Kb)if(Qa=bc.ranges,"block"==sa)for(sa=0;sa<Qa.length;sa++)Qa[sa].head.ch=Wa(r,Qa[sa].head.line);else"line"==sa&&(Qa[0].head=
B(Qa[0].head.line+1,0))}else{bc=da(bc||Ab);Qa=da(xc||Kb);ca(Qa,bc)&&(Kb=bc,bc=Qa,Qa=Kb);if(Kb=sa.linewise||Ya.linewise)lb=Qa,bc.ch=0,lb.ch=0,lb.line++;else if(sa.forward&&(lb=Qa,Z=r.getRange(bc,lb),/\n\s*$/.test(Z))){Z=Z.split("\n");Z.pop();for(F=Z.pop();0<Z.length&&F&&R(F);F=Z.pop())lb.line--,lb.ch=0;F?(lb.line--,lb.ch=Wa(r,lb.line)):lb.ch=0}bc=la(r,{anchor:bc,head:Qa},"char",!sa.inclusive||Kb)}r.setSelections(bc.ranges,bc.primary);w.lastMotion=null;Ya.repeat=rc;Ya.registerName=ib;Ya.linewise=Kb;
ta=Wb[ta](r,Ya,bc.ranges,Ab,xc);w.visualMode&&ua(r,null!=ta);ta&&r.setCursor(ta)}},recordLastEdit:function(r,w,F){var Z=cc.macroModeState;Z.isPlaying||(r.lastEditInputState=w,r.lastEditActionCommand=F,Z.lastInsertModeChanges.changes=[],Z.lastInsertModeChanges.expectCursorActivityForChange=!1,Z.lastInsertModeChanges.visualBlock=r.visualBlock?r.sel.head.line-r.sel.anchor.line:0)}},Ob={moveToTopLine:function(r,w,F){w=Ga(r).top+F.repeat-1;return B(w,G(r.getLine(w)))},moveToMiddleLine:function(r){var w=
Ga(r);w=Math.floor(.5*(w.top+w.bottom));return B(w,G(r.getLine(w)))},moveToBottomLine:function(r,w,F){w=Ga(r).bottom-F.repeat+1;return B(w,G(r.getLine(w)))},expandToLine:function(r,w,F){return B(w.line+F.repeat-1,Infinity)},findNext:function(r,w,F){w=Ta(r);var Z=w.getQuery();if(Z){var sa=!F.forward;sa=w.isReversed()?!sa:sa;Gb(r,Z);return gc(r,sa,Z,F.repeat)}},goToMark:function(r,w,F,Z){return(w=bb(r,Z,F.selectedCharacter))?F.linewise?{line:w.line,ch:G(r.getLine(w.line))}:w:null},moveToOtherHighlightedEnd:function(r,
w,F,Z){return Z.visualBlock&&F.sameLine?(w=Z.sel,[v(r,B(w.anchor.line,w.head.ch)),v(r,B(w.head.line,w.anchor.ch))]):[Z.sel.head,Z.sel.anchor]},jumpToMark:function(r,w,F,Z){for(var sa=0;sa<F.repeat;sa++){var ta=w,Ya;for(Ya in Z.marks)if(/^[a-z]$/.test(Ya)){var ib=Z.marks[Ya].find();if(F.forward?!ca(ib,ta):!ca(ta,ib))if(!F.linewise||ib.line!=ta.line){var Qa=wa(ta,w),lb=F.forward?Oa(ta,ib,w):Oa(w,ib,ta);if(Qa||lb)w=ib}}}F.linewise&&(w=B(w.line,G(r.getLine(w.line))));return w},moveByCharacters:function(r,
w,F){r=F.repeat;return B(w.line,F.forward?w.ch+r:w.ch-r)},moveByLines:function(r,w,F,Z){var sa=w.ch;switch(Z.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:sa=Z.lastHPos;break;default:Z.lastHPos=sa}var ta=F.repeat+(F.repeatOffset||0),Ya=F.forward?w.line+ta:w.line-ta,ib=r.firstLine(),Qa=r.lastLine();ta=r.findPosV(w,F.forward?ta:-ta,"line",Z.lastHSPos);if(F.forward?ta.line>Ya:ta.line<Ya)Ya=ta.line,sa=ta.ch;if(Ya<ib&&w.line==
ib)return this.moveToStartOfLine(r,w,F,Z);if(Ya>Qa&&w.line==Qa)return this.moveToEol(r,w,F,Z,!0);F.toFirstChar&&(sa=G(r.getLine(Ya)),Z.lastHPos=sa);Z.lastHSPos=r.charCoords(B(Ya,sa),"div").left;return B(Ya,sa)},moveByDisplayLines:function(r,w,F,Z){switch(Z.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:Z.lastHSPos=r.charCoords(w,"div").left}var sa=F.repeat;w=r.findPosV(w,F.forward?sa:-sa,"line",Z.lastHSPos);
w.hitSide&&(F.forward?(F={top:r.charCoords(w,"div").top+8,left:Z.lastHSPos},w=r.coordsChar(F,"div")):(F=r.charCoords(B(r.firstLine(),0),"div"),F.left=Z.lastHSPos,w=r.coordsChar(F,"div")));Z.lastHPos=w.ch;return w},moveByPage:function(r,w,F){var Z=F.repeat;return r.findPosV(w,F.forward?Z:-Z,"page")},moveByParagraph:function(r,w,F){return D(r,w,F.repeat,F.forward?1:-1)},moveBySentence:function(r,w,F){return U(r,w,F.repeat,F.forward?1:-1)},moveByScroll:function(r,w,F,Z){var sa=r.getScrollInfo(),ta=F.repeat;
ta||(ta=sa.clientHeight/(2*r.defaultTextHeight()));var Ya=r.charCoords(w,"local");F.repeat=ta;w=Ob.moveByDisplayLines(r,w,F,Z);if(!w)return null;F=r.charCoords(w,"local");r.scrollTo(null,sa.top+F.top-Ya.top);return w},moveByWords:function(r,w,F){var Z=w,sa=F.repeat;w=!!F.forward;var ta=!!F.wordEnd,Ya=!!F.bigWord;F=da(Z);var ib=[];(w&&!ta||!w&&ta)&&sa++;for(var Qa=!(w&&ta),lb=0;lb<sa;lb++){b:{var Ab=r;var Kb=w,rc=Ya,xc=Qa,bc=Z.line,Dc=Z.ch,Rc=Ab.getLine(bc),Lc=Kb?1:-1;rc=rc?fd:Lb;if(xc&&""==Rc){bc+=
Lc;Rc=Ab.getLine(bc);if(!aa(Ab,bc)){Ab=null;break b}Dc=Kb?0:Rc.length}for(;;){if(xc&&""==Rc){Ab={from:0,to:0,line:bc};break b}Kb=0<Lc?Rc.length:-1;for(var ed,Sc;Dc!=Kb;){for(var sc=!1,Fc=0;Fc<rc.length&&!sc;++Fc)if(rc[Fc](Rc.charAt(Dc))){for(ed=Dc;Dc!=Kb&&rc[Fc](Rc.charAt(Dc));)Dc+=Lc;Sc=Dc;sc=ed!=Sc;if(ed!=Z.ch||bc!=Z.line||Sc!=ed+Lc){Ab={from:Math.min(ed,Sc+1),to:Math.max(ed,Sc),line:bc};break b}}sc||(Dc+=Lc)}bc+=Lc;if(!aa(Ab,bc)){Ab=null;break b}Rc=Ab.getLine(bc);Dc=0<Lc?0:Rc.length}}if(!Ab){Ya=
Wa(r,r.lastLine());ib.push(w?{line:r.lastLine(),from:Ya,to:Ya}:{line:0,from:0,to:0});break}ib.push(Ab);Z=B(Ab.line,w?Ab.to-1:Ab.from)}r=ib.length!=sa;sa=ib[0];Ya=ib.pop();w&&!ta?(r||sa.from==F.ch&&sa.line==F.line||(Ya=ib.pop()),w=B(Ya.line,Ya.from)):w&&ta?w=B(Ya.line,Ya.to-1):!w&&ta?(r||sa.to==F.ch&&sa.line==F.line||(Ya=ib.pop()),w=B(Ya.line,Ya.to)):w=B(Ya.line,Ya.from);return w},moveTillCharacter:function(r,w,F){r=Na(r,F.repeat,F.forward,F.selectedCharacter);w=F.forward?-1:1;Aa(w,F);if(!r)return null;
r.ch+=w;return r},moveToCharacter:function(r,w,F){var Z=F.repeat;Aa(0,F);return Na(r,Z,F.forward,F.selectedCharacter)||w},moveToSymbol:function(r,w,F){var Z=F.repeat,sa=F.forward,ta=F.selectedCharacter;F=da(r.getCursor());var Ya=sa?1:-1,ib=sa?r.lineCount():-1,Qa=F.ch,lb=F.line,Ab=r.getLine(lb);sa={lineText:Ab,nextCh:Ab.charAt(Qa),lastCh:null,index:Qa,symb:ta,reverseSymb:(sa?{")":"(","}":"{"}:{"(":")","{":"}"})[ta],forward:sa,depth:0,curMoveThrough:!1};if(Qa=kc[ta]){ta=cb[Qa].init;Qa=cb[Qa].isComplete;
for(ta&&ta(sa);lb!==ib&&Z;)sa.index+=Ya,sa.nextCh=sa.lineText.charAt(sa.index),sa.nextCh||(lb+=Ya,sa.lineText=r.getLine(lb)||"",0<Ya?sa.index=0:(ta=sa.lineText.length,sa.index=0<ta?ta-1:0),sa.nextCh=sa.lineText.charAt(sa.index)),Qa(sa)&&(F.line=lb,F.ch=sa.index,Z--);r=sa.nextCh||sa.curMoveThrough?B(lb,sa.index):F}else r=F;return r||w},moveToColumn:function(r,w,F,Z){F=F.repeat;Z.lastHPos=F-1;Z.lastHSPos=r.charCoords(w,"div").left;w=r.getCursor().line;return v(r,B(w,F-1))},moveToEol:function(r,w,F,
Z,sa){w=B(w.line+F.repeat-1,Infinity);F=r.clipPos(w);F.ch--;sa||(Z.lastHPos=Infinity,Z.lastHSPos=r.charCoords(F,"div").left);return w},moveToFirstNonWhiteSpaceCharacter:function(r,w){return B(w.line,G(r.getLine(w.line)))},moveToMatchedSymbol:function(r,w){for(var F=w.line,Z=w.ch,sa=r.getLine(F),ta;Z<sa.length&&(!(ta=sa.charAt(Z))||-1=="()[]{}".indexOf(ta)||(ta=r.getTokenTypeAt(B(F,Z+1)),"string"===ta||"comment"===ta));Z++);return Z<sa.length?(w="\x3c"===Z||"\x3e"===Z?/[(){}[\]<>]/:/[(){}[\]]/,r.findMatchingBracket(B(F,
Z),{bracketRegex:w}).to):w},moveToStartOfLine:function(r,w){return B(w.line,0)},moveToLineOrEdgeOfDocument:function(r,w,F){w=F.forward?r.lastLine():r.firstLine();F.repeatIsExplicit&&(w=F.repeat-r.getOption("firstLineNumber"));return B(w,G(r.getLine(w)))},textObjectManipulation:function(r,w,F,Z){var sa={"'":!0,'"':!0,"`":!0},ta=F.selectedCharacter;"b"==ta?ta="(":"B"==ta&&(ta="{");var Ya=!F.textObjectInner;if({"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","\x3c":"\x3e","\x3e":"\x3c"}[ta]){var ib=
{"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"\x3c":/[<>]/,"\x3e":/[<>]/}[ta];var Qa={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","\x3c":"\x3c","\x3e":"\x3c"}[ta];F=r.getLine(w.line).charAt(w.ch)===Qa?1:0;Qa=r.scanForBracket(B(w.line,w.ch+F),-1,void 0,{bracketRegex:ib});ib=r.scanForBracket(B(w.line,w.ch+F),1,void 0,{bracketRegex:ib});if(Qa&&ib){Qa=Qa.pos;ib=ib.pos;if(Qa.line==ib.line&&Qa.ch>ib.ch||Qa.line>ib.line)w=Qa,Qa=ib,ib=w;Ya?ib.ch+=1:Qa.ch+=1;w={start:Qa,end:ib}}else w=
{start:w,end:w}}else if(sa[ta]){F=ta;w=da(w);Z=r.getLine(w.line).split("");ta=Z.indexOf(F);w.ch<ta?w.ch=ta:ta<w.ch&&Z[w.ch]==F&&(ib=w.ch,--w.ch);if(Z[w.ch]!=F||ib)for(ta=w.ch;-1<ta&&!Qa;ta--)Z[ta]==F&&(Qa=ta+1);else Qa=w.ch+1;if(Qa&&!ib)for(ta=Qa,sa=Z.length;ta<sa&&!ib;ta++)Z[ta]==F&&(ib=ta);Qa&&ib?(Ya&&(--Qa,++ib),w={start:B(w.line,Qa),end:B(w.line,ib)}):w={start:w,end:w}}else if("W"===ta)w=qa(r,Ya,!0,!0);else if("w"===ta)w=qa(r,Ya,!0,!1);else if("p"===ta)if(w=D(r,w,F.repeat,0,Ya),F.linewise=!0,
Z.visualMode)Z.visualLine||(Z.visualLine=!0);else{if(Ya=Z.inputState.operatorArgs)Ya.linewise=!0;w.end.line--}else return null;return r.state.vim.visualMode?(Ya=w.start,w=w.end,ib=r.state.vim.sel,Qa=ib.head,ib=ib.anchor,ca(w,Ya)&&(F=w,w=Ya,Ya=F),ca(Qa,ib)?(Qa=fa(Ya,Qa),ib=Ha(ib,w)):(ib=fa(Ya,ib),Qa=Ha(Qa,w),Qa=x(Qa,0,-1),-1==Qa.ch&&Qa.line!=r.firstLine()&&(Qa=B(Qa.line-1,Wa(r,Qa.line-1)))),[ib,Qa]):[w.start,w.end]},repeatLastCharacterSearch:function(r,w,F){var Z=cc.lastCharacterSearch,sa=F.repeat,
ta=F.forward===Z.forward,Ya=(Z.increment?1:0)*(ta?-1:1);r.moveH(-Ya,"char");F.inclusive=ta?!0:!1;F=Na(r,sa,ta,Z.selectedCharacter);if(!F)return r.moveH(Ya,"char"),w;F.ch+=Ya;return F}},Wb={change:function(r,w,F){var Z=r.state.vim;var sa=F[0].anchor;var ta=F[0].head;if(Z.visualMode)if(w.fullLine){ta.ch=Number.MAX_VALUE;ta.line--;r.setSelection(sa,ta);var Ya=r.getSelection();r.replaceSelection("")}else Ya=r.getSelection(),sa=p("",F.length),r.replaceSelections(sa),sa=fa(F[0].head,F[0].anchor);else{Ya=
r.getRange(sa,ta);Z=Z.lastEditInputState||{};if("moveByWords"==Z.motion&&!R(Ya)){var ib=/\s+$/.exec(Ya);ib&&Z.motionArgs&&Z.motionArgs.forward&&(ta=x(ta,0,-ib[0].length),Ya=Ya.slice(0,-ib[0].length))}Z=new B(sa.line-1,Number.MAX_VALUE);ib=r.firstLine()==r.lastLine();ta.line>r.lastLine()&&w.linewise&&!ib?r.replaceRange("",Z,ta):r.replaceRange("",sa,ta);w.linewise&&(ib||(r.setCursor(Z),m.commands.newlineAndIndent(r)),sa.ch=Number.MAX_VALUE)}cc.registerController.pushText(w.registerName,"change",Ya,
w.linewise,1<F.length);Xb.enterInsertMode(r,{head:sa},r.state.vim)},"delete":function(r,w,F){var Z=r.state.vim;if(Z.visualBlock){var sa=r.getSelection();var ta=p("",F.length);r.replaceSelections(ta);F=F[0].anchor}else ta=F[0].anchor,F=F[0].head,w.linewise&&F.line!=r.firstLine()&&ta.line==r.lastLine()&&ta.line==F.line-1&&(ta.line==r.firstLine()?ta.ch=0:ta=B(ta.line-1,Wa(r,ta.line-1))),sa=r.getRange(ta,F),r.replaceRange("",ta,F),F=ta,w.linewise&&(F=Ob.moveToFirstNonWhiteSpaceCharacter(r,ta));cc.registerController.pushText(w.registerName,
"delete",sa,w.linewise,Z.visualBlock);return v(r,F)},indent:function(r,w,F){var Z=r.state.vim,sa=F[0].anchor.line,ta=Z.visualBlock?F[F.length-1].anchor.line:F[0].head.line;Z=Z.visualMode?w.repeat:1;for(w.linewise&&ta--;sa<=ta;sa++)for(var Ya=0;Ya<Z;Ya++)r.indentLine(sa,w.indentRight);return Ob.moveToFirstNonWhiteSpaceCharacter(r,F[0].anchor)},indentAuto:function(r,w,F){r.execCommand("indentAuto");return Ob.moveToFirstNonWhiteSpaceCharacter(r,F[0].anchor)},changeCase:function(r,w,F,Z,sa){for(var ta=
r.getSelections(),Ya=[],ib=w.toLower,Qa=0;Qa<ta.length;Qa++){var lb=ta[Qa],Ab="";if(!0===ib)Ab=lb.toLowerCase();else if(!1===ib)Ab=lb.toUpperCase();else for(var Kb=0;Kb<lb.length;Kb++){var rc=lb.charAt(Kb);Ab+=H(rc)?rc.toLowerCase():rc.toUpperCase()}Ya.push(Ab)}r.replaceSelections(Ya);return w.shouldMoveCursor?sa:!r.state.vim.visualMode&&w.linewise&&F[0].anchor.line+1==F[0].head.line?Ob.moveToFirstNonWhiteSpaceCharacter(r,Z):w.linewise?Z:fa(F[0].anchor,F[0].head)},yank:function(r,w,F,Z){var sa=r.state.vim;
r=r.getSelection();F=sa.visualMode?fa(sa.sel.anchor,sa.sel.head,F[0].head,F[0].anchor):Z;cc.registerController.pushText(w.registerName,"yank",r,w.linewise,sa.visualBlock);return F}},Xb={jumpListWalk:function(r,w,F){F.visualMode||(F=w.repeat,w=(w=(w=cc.jumpList.move(r,w.forward?F:-F))?w.find():void 0)?w:r.getCursor(),r.setCursor(w))},scroll:function(r,w,F){if(!F.visualMode){var Z=w.repeat||1;F=r.defaultTextHeight();var sa=r.getScrollInfo().top;Z*=F;sa=w.forward?sa+Z:sa-Z;Z=da(r.getCursor());var ta=
r.charCoords(Z,"local");w.forward?sa>ta.top?(Z.line+=(sa-ta.top)/F,Z.line=Math.ceil(Z.line),r.setCursor(Z),ta=r.charCoords(Z,"local"),r.scrollTo(null,ta.top)):r.scrollTo(null,sa):(w=sa+r.getScrollInfo().clientHeight,w<ta.bottom?(Z.line-=(ta.bottom-w)/F,Z.line=Math.floor(Z.line),r.setCursor(Z),ta=r.charCoords(Z,"local"),r.scrollTo(null,ta.bottom-r.getScrollInfo().clientHeight)):r.scrollTo(null,sa))}},scrollToCursor:function(r,w){var F=r.getCursor().line,Z=r.charCoords(B(F,0),"local");F=r.getScrollInfo().clientHeight;
var sa=Z.top;Z=Z.bottom-sa;switch(w.position){case "center":sa=sa-F/2+Z;break;case "bottom":sa=sa-F+Z}r.scrollTo(null,sa)},replayMacro:function(r,w,F){var Z=w.selectedCharacter;w=w.repeat;var sa=cc.macroModeState;for("@"==Z?Z=sa.latestRegister:sa.latestRegister=Z;w--;){var ta=r,Ya=F,ib=sa,Qa=Z,lb=cc.registerController.getRegister(Qa);if(":"==Qa)lb.keyBuffer[0]&&Ub.processCommand(ta,lb.keyBuffer[0]);else{Qa=lb.keyBuffer;var Ab=0;ib.isPlaying=!0;ib.replaySearchQueries=lb.searchQueries.slice(0);for(var Kb=
0;Kb<Qa.length;Kb++)for(var rc=Qa[Kb],xc,bc;rc;)xc=/<\w+-.+?>|<\w+>|./.exec(rc),bc=xc[0],rc=rc.substring(xc.index+bc.length),m.Vim.handleKey(ta,bc,"macro"),Ya.insertMode&&(xc=lb.insertModeChanges[Ab++].changes,cc.macroModeState.lastInsertModeChanges.changes=xc,oc(ta,xc,1),Ba(ta))}ib.isPlaying=!1}},enterMacroRecordMode:function(r,w){var F=cc.macroModeState;w=w.selectedCharacter;cc.registerController.isValidRegister(w)&&F.enterMacroRecordMode(r,w)},toggleOverwrite:function(r){r.state.overwrite?(r.toggleOverwrite(!1),
r.setOption("keyMap","vim-insert"),m.signal(r,"vim-mode-change",{mode:"insert"})):(r.toggleOverwrite(!0),r.setOption("keyMap","vim-replace"),m.signal(r,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(r,w,F){if(!r.getOption("readOnly")){F.insertMode=!0;F.insertModeRepeat=w&&w.repeat||1;var Z=w?w.insertAt:null,sa=F.sel,ta=w.head||r.getCursor("head"),Ya=r.listSelections().length;if("eol"==Z)ta=B(ta.line,Wa(r,ta.line));else if("bol"==Z)ta=B(ta.line,0);else if("charAfter"==Z)ta=x(ta,0,1);
else if("firstNonBlank"==Z)ta=Ob.moveToFirstNonWhiteSpaceCharacter(r,ta);else if("startOfSelectedArea"==Z){if(!F.visualMode)return;F.visualBlock?(ta=B(Math.min(sa.head.line,sa.anchor.line),Math.min(sa.head.ch,sa.anchor.ch)),Ya=Math.abs(sa.head.line-sa.anchor.line)+1):ta=sa.head.line<sa.anchor.line?sa.head:B(sa.anchor.line,0)}else if("endOfSelectedArea"==Z){if(!F.visualMode)return;F.visualBlock?(ta=B(Math.min(sa.head.line,sa.anchor.line),Math.max(sa.head.ch+1,sa.anchor.ch)),Ya=Math.abs(sa.head.line-
sa.anchor.line)+1):ta=sa.head.line>=sa.anchor.line?x(sa.head,0,1):B(sa.anchor.line,0)}else if("inplace"==Z){if(F.visualMode)return}else"lastEdit"==Z&&(ta=Eb(r)||ta);r.setOption("disableInput",!1);w&&w.replace?(r.toggleOverwrite(!0),r.setOption("keyMap","vim-replace"),m.signal(r,"vim-mode-change",{mode:"replace"})):(r.toggleOverwrite(!1),r.setOption("keyMap","vim-insert"),m.signal(r,"vim-mode-change",{mode:"insert"}));cc.macroModeState.isPlaying||(r.on("change",ub),m.on(r.getInputField(),"keydown",
Vb));F.visualMode&&ua(r);nb(r,ta,Ya)}},toggleVisualMode:function(r,w,F){var Z=w.repeat,sa=r.getCursor();F.visualMode?F.visualLine^w.linewise||F.visualBlock^w.blockwise?(F.visualLine=!!w.linewise,F.visualBlock=!!w.blockwise,m.signal(r,"vim-mode-change",{mode:"visual",subMode:F.visualLine?"linewise":F.visualBlock?"blockwise":""}),oa(r)):ua(r):(F.visualMode=!0,F.visualLine=!!w.linewise,F.visualBlock=!!w.blockwise,w=v(r,B(sa.line,sa.ch+Z-1)),F.sel={anchor:sa,head:w},m.signal(r,"vim-mode-change",{mode:"visual",
subMode:F.visualLine?"linewise":F.visualBlock?"blockwise":""}),oa(r),K(r,F,"\x3c",fa(sa,w)),K(r,F,"\x3e",Ha(sa,w)))},reselectLastSelection:function(r,w,F){w=F.lastSelection;F.visualMode&&fb(r,F);if(w){var Z=w.anchorMark.find(),sa=w.headMark.find();Z&&sa&&(F.sel={anchor:Z,head:sa},F.visualMode=!0,F.visualLine=w.visualLine,F.visualBlock=w.visualBlock,oa(r),K(r,F,"\x3c",fa(Z,sa)),K(r,F,"\x3e",Ha(Z,sa)),m.signal(r,"vim-mode-change",{mode:"visual",subMode:F.visualLine?"linewise":F.visualBlock?"blockwise":
""}))}},joinLines:function(r,w,F){if(F.visualMode){var Z=r.getCursor("anchor");var sa=r.getCursor("head");if(ca(sa,Z)){var ta=sa;sa=Z;Z=ta}sa.ch=Wa(r,sa.line)-1}else sa=Math.max(w.repeat,2),Z=r.getCursor(),sa=v(r,B(Z.line+sa-1,Infinity));for(var Ya=0,ib=Z.line;ib<sa.line;ib++){Ya=Wa(r,Z.line);ta=B(Z.line+1,Wa(r,Z.line+1));var Qa=r.getRange(Z,ta);Qa=w.keepSpaces?Qa.replace(/\n\r?/g,""):Qa.replace(/\n\s*/g," ");r.replaceRange(Qa,Z,ta)}w=B(Z.line,Ya);F.visualMode&&ua(r,!1);r.setCursor(w)},newLineAndEnterInsertMode:function(r,
w,F){F.insertMode=!0;var Z=da(r.getCursor());Z.line!==r.firstLine()||w.after?(Z.line=w.after?Z.line:Z.line-1,Z.ch=Wa(r,Z.line),r.setCursor(Z),(m.commands.newlineAndIndentContinueComment||m.commands.newlineAndIndent)(r)):(r.replaceRange("\n",B(r.firstLine(),0)),r.setCursor(r.firstLine(),0));this.enterInsertMode(r,{repeat:w.repeat},F)},paste:function(r,w,F){var Z=da(r.getCursor()),sa=cc.registerController.getRegister(w.registerName),ta=sa.toString();if(ta){if(w.matchIndent){var Ya=r.getOption("tabSize"),
ib=function(bc){var Dc=bc.split("\t").length-1;bc=bc.split(" ").length-1;return Dc*Ya+1*bc},Qa=r.getLine(r.getCursor().line),lb=ib(Qa.match(/^\s*/)[0]);Qa=ta.replace(/\n$/,"");var Ab=ta!==Qa,Kb=ib(ta.match(/^\s*/)[0]);ta=Qa.replace(/^\s*/gm,function(bc){bc=lb+(ib(bc)-Kb);return 0>bc?"":r.getOption("indentWithTabs")?Array(Math.floor(bc/Ya)+1).join("\t"):Array(bc+1).join(" ")});ta+=Ab?"\n":""}1<w.repeat&&(ta=Array(w.repeat+1).join(ta));Qa=sa.linewise;if(sa=sa.blockwise){ta=ta.split("\n");Qa&&ta.pop();
for(Ab=0;Ab<ta.length;Ab++)ta[Ab]=""==ta[Ab]?" ":ta[Ab];Z.ch+=w.after?1:0;Z.ch=Math.min(Wa(r,Z.line),Z.ch)}else Qa?F.visualMode?ta=F.visualLine?ta.slice(0,-1):"\n"+ta.slice(0,ta.length-1)+"\n":w.after?(ta="\n"+ta.slice(0,ta.length-1),Z.ch=Wa(r,Z.line)):Z.ch=0:Z.ch+=w.after?1:0;var rc;if(F.visualMode){F.lastPastedText=ta;w=Ma(r,F);Z=w[0];w=w[1];Ab=r.getSelection();var xc=r.listSelections();xc=Array(xc.length).join("1").split("1");F.lastSelection&&(rc=F.lastSelection.headMark.find());cc.registerController.unnamedRegister.setText(Ab);
sa?(r.replaceSelections(xc),w=B(Z.line+ta.length-1,Z.ch),r.setCursor(Z),qb(r,w),r.replaceSelections(ta),ta=Z):F.visualBlock?(r.replaceSelections(xc),r.setCursor(Z),r.replaceRange(ta,Z,Z),ta=Z):(r.replaceRange(ta,Z,w),ta=r.posFromIndex(r.indexFromPos(Z)+ta.length-1));rc&&(F.lastSelection.headMark=r.setBookmark(rc));Qa&&(ta.ch=0)}else if(sa){r.setCursor(Z);for(Ab=0;Ab<ta.length;Ab++)rc=Z.line+Ab,rc>r.lastLine()&&r.replaceRange("\n",B(rc,0)),Wa(r,rc)<Z.ch&&gb(r,rc,Z.ch);r.setCursor(Z);qb(r,B(Z.line+
ta.length-1,Z.ch));r.replaceSelections(ta);ta=Z}else r.replaceRange(ta,Z),Qa&&w.after?ta=B(Z.line+1,G(r.getLine(Z.line+1))):Qa&&!w.after?ta=B(Z.line,G(r.getLine(Z.line))):!Qa&&w.after?(rc=r.indexFromPos(Z),ta=r.posFromIndex(rc+ta.length-1)):(rc=r.indexFromPos(Z),ta=r.posFromIndex(rc+ta.length));F.visualMode&&ua(r,!1);r.setCursor(ta)}},undo:function(r,w){r.operation(function(){J(r,m.commands.undo,w.repeat)();r.setCursor(r.getCursor("anchor"))})},redo:function(r,w){J(r,m.commands.redo,w.repeat)()},
setRegister:function(r,w,F){F.inputState.registerName=w.selectedCharacter},setMark:function(r,w,F){K(r,F,w.selectedCharacter,r.getCursor())},replace:function(r,w,F){var Z=w.selectedCharacter,sa=r.getCursor(),ta=r.listSelections();if(F.visualMode){sa=r.getCursor("start");var Ya=r.getCursor("end")}else Ya=r.getLine(sa.line),w=sa.ch+w.repeat,w>Ya.length&&(w=Ya.length),Ya=B(sa.line,w);"\n"==Z?(F.visualMode||r.replaceRange("",sa,Ya),(m.commands.newlineAndIndentContinueComment||m.commands.newlineAndIndent)(r)):
(w=r.getRange(sa,Ya),w=w.replace(/[^\n]/g,Z),F.visualBlock?(sa=Array(r.getOption("tabSize")+1).join(" "),w=r.getSelection(),w=w.replace(/\t/g,sa).replace(/[^\n]/g,Z).split("\n"),r.replaceSelections(w)):r.replaceRange(w,sa,Ya),F.visualMode?(sa=ca(ta[0].anchor,ta[0].head)?ta[0].anchor:ta[0].head,r.setCursor(sa),ua(r,!1)):r.setCursor(x(Ya,0,-1)))},incrementNumberToken:function(r,w){for(var F=r.getCursor(),Z=r.getLine(F.line),sa=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi,ta,Ya,ib;null!==(ta=sa.exec(Z))&&
!(Ya=ta.index,ib=Ya+ta[0].length,F.ch<ib););if((w.backtrack||!(ib<=F.ch))&&ta){Z=ta[2]||ta[4];sa=ta[3]||ta[5];var Qa=w.increase?1:-1,lb={"0b":2,0:8,"":10,"0x":16}[Z.toLowerCase()];w=(parseInt(ta[1]+sa,lb)+Qa*w.repeat).toString(lb);ta=Z?Array(sa.length-w.length+1+ta[1].length).join("0"):"";w="-"===w.charAt(0)?"-"+Z+ta+w.substr(1):Z+ta+w;ta=B(F.line,Ya);ib=B(F.line,ib);r.replaceRange(w,ta,ib);r.setCursor(B(F.line,Ya+w.length-1))}},repeatLastEdit:function(r,w,F){if(F.lastEditInputState){var Z=w.repeat;
Z&&w.repeatIsExplicit?F.lastEditInputState.repeatOverride=Z:Z=F.lastEditInputState.repeatOverride||Z;sb(r,F,Z,!1)}},indent:function(r,w){r.indentLine(r.getCursor().line,w.indentRight)},exitInsertMode:Ba},kc={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},cb={bracket:{isComplete:function(r){if(r.nextCh===r.symb){if(r.depth++,1<=r.depth)return!0}else r.nextCh===r.reverseSymb&&r.depth--;return!1}},
section:{init:function(r){r.curMoveThrough=!0;r.symb=(r.forward?"]":"[")===r.symb?"{":"}"},isComplete:function(r){return 0===r.index&&r.nextCh===r.symb}},comment:{isComplete:function(r){var w="*"===r.lastCh&&"/"===r.nextCh;r.lastCh=r.nextCh;return w}},method:{init:function(r){r.symb="m"===r.symb?"{":"}";r.reverseSymb="{"===r.symb?"}":"{"},isComplete:function(r){return r.nextCh===r.symb?!0:!1}},preprocess:{init:function(r){r.index=0},isComplete:function(r){if("#"===r.nextCh){var w=r.lineText.match(/#(\w+)/)[1];
if("endif"===w){if(r.forward&&0===r.depth)return!0;r.depth++}else if("if"===w){if(!r.forward&&0===r.depth)return!0;r.depth--}if("else"===w&&0===r.depth)return!0}return!1}}};N("pcre",!0,"boolean");ma.prototype={getQuery:function(){return cc.query},setQuery:function(r){cc.query=r},getOverlay:function(){return this.searchOverlay},setOverlay:function(r){this.searchOverlay=r},isReversed:function(){return cc.isReversed},setReversed:function(r){cc.isReversed=r},getScrollbarAnnotate:function(){return this.annotate},
setScrollbarAnnotate:function(r){this.annotate=r}};var Qb={"\\n":"\n","\\r":"\r","\\t":"\t"},ec={"\\/":"/","\\\\":"\\","\\n":"\n","\\r":"\r","\\t":"\t","\\\x26":"\x26"},Sb="(Javascript regexp)",hc=0,Pb=function(){this.buildCommandMap_()};Pb.prototype={processCommand:function(r,w,F){var Z=this;r.operation(function(){r.curOp.isVimOp=!0;Z._processCommand(r,w,F)})},_processCommand:function(r,w,F){var Z=r.state.vim,sa=cc.registerController.getRegister(":"),ta=sa.toString();Z.visualMode&&ua(r);Z=new m.StringStream(w);
sa.setText(w);F=F||{};F.input=w;try{this.parseInput_(r,Z,F)}catch(Qa){throw Pa(r,Qa),Qa;}var Ya;if(F.commandName){if(Ya=this.matchCommand_(F.commandName)){var ib=Ya.name;Ya.excludeFromCommandHistory&&sa.setText(ta);this.parseCommandArgs_(Z,F,Ya);if("exToKey"==Ya.type){for(w=0;w<Ya.toKeys.length;w++)m.Vim.handleKey(r,Ya.toKeys[w],"mapping");return}if("exToEx"==Ya.type){this.processCommand(r,Ya.toInput);return}}}else void 0!==F.line&&(ib="move");if(ib)try{dc[ib](r,F),Ya&&Ya.possiblyAsync||!F.callback||
F.callback()}catch(Qa){throw Pa(r,Qa),Qa;}else Pa(r,'Not an editor command ":'+w+'"')},parseInput_:function(r,w,F){w.eatWhile(":");w.eat("%")?(F.line=r.firstLine(),F.lineEnd=r.lastLine()):(F.line=this.parseLineSpec_(r,w),void 0!==F.line&&w.eat(",")&&(F.lineEnd=this.parseLineSpec_(r,w)));r=w.match(/^(\w+)/);F.commandName=r?r[1]:w.match(/.*/)[0];return F},parseLineSpec_:function(r,w){var F=w.match(/^(\d+)/);if(F)return parseInt(F[1],10)-1;switch(w.next()){case ".":return this.parseLineSpecOffset_(w,
r.getCursor().line);case "$":return this.parseLineSpecOffset_(w,r.lastLine());case "'":F=w.next();r=bb(r,r.state.vim,F);if(!r)throw Error("Mark not set");return this.parseLineSpecOffset_(w,r.line);case "-":case "+":return w.backUp(1),this.parseLineSpecOffset_(w,r.getCursor().line);default:w.backUp(1)}},parseLineSpecOffset_:function(r,w){if(r=r.match(/^([+-])?(\d+)/)){var F=parseInt(r[2],10);w="-"==r[1]?w-F:w+F}return w},parseCommandArgs_:function(r,w,F){r.eol()||(w.argString=r.match(/.*/)[0],r=F.argDelimiter||
/\s+/,r=tb(w.argString).split(r),r.length&&r[0]&&(w.args=r))},matchCommand_:function(r){for(var w=r.length;0<w;w--){var F=r.substring(0,w);if(this.commandMap_[F]&&(F=this.commandMap_[F],0===F.name.indexOf(r)))return F}return null},buildCommandMap_:function(){this.commandMap_={};for(var r=0;r<u.length;r++){var w=u[r];this.commandMap_[w.shortName||w.name]=w}},map:function(r,w,F){if(":"!=r&&":"==r.charAt(0)){if(F)throw Error("Mode not supported for ex mappings");F=r.substring(1);":"!=w&&":"==w.charAt(0)?
this.commandMap_[F]={name:F,type:"exToEx",toInput:w.substring(1),user:!0}:this.commandMap_[F]={name:F,type:"exToKey",toKeys:w,user:!0}}else w=":"!=w&&":"==w.charAt(0)?{keys:r,type:"keyToEx",exArgs:{input:w.substring(1)}}:{keys:r,type:"keyToKey",toKeys:w},F&&(w.context=F),ka.unshift(w)},unmap:function(r,w){if(":"!=r&&":"==r.charAt(0)){if(w)throw Error("Mode not supported for ex mappings");r=r.substring(1);if(this.commandMap_[r]&&this.commandMap_[r].user){delete this.commandMap_[r];return}}else for(var F=
0;F<ka.length;F++)if(r==ka[F].keys&&ka[F].context===w){ka.splice(F,1);return}throw Error("No such mapping.");}};var dc={colorscheme:function(r,w){!w.args||1>w.args.length?Pa(r,r.getOption("theme")):r.setOption("theme",w.args[0])},map:function(r,w,F){var Z=w.args;!Z||2>Z.length?r&&Pa(r,"Invalid mapping: "+w.input):Ub.map(Z[0],Z[1],F)},imap:function(r,w){this.map(r,w,"insert")},nmap:function(r,w){this.map(r,w,"normal")},vmap:function(r,w){this.map(r,w,"visual")},unmap:function(r,w,F){var Z=w.args;!Z||
1>Z.length?r&&Pa(r,"No such mapping: "+w.input):Ub.unmap(Z[0],F)},move:function(r,w){zb.processCommand(r,r.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:w.line+1})},set:function(r,w){var F=w.args,Z=w.setCfg||{};if(!F||1>F.length)r&&Pa(r,"Invalid mapping: "+w.input);else{var sa=F[0].split("\x3d");F=sa[0];sa=sa[1];var ta=!1;if("?"==F.charAt(F.length-1)){if(sa)throw Error("Trailing characters: "+w.argString);F=F.substring(0,
F.length-1);ta=!0}void 0===sa&&"no"==F.substring(0,2)&&(F=F.substring(2),sa=!1);(w=wd[F]&&"boolean"==wd[F].type)&&void 0==sa&&(sa=!0);!w&&void 0===sa||ta?(Z=Y(F,r,Z),Z instanceof Error?Pa(r,Z.message):!0===Z||!1===Z?Pa(r," "+(Z?"":"no")+F):Pa(r,"  "+F+"\x3d"+Z)):(Z=O(F,sa,r,Z),Z instanceof Error&&Pa(r,Z.message))}},setlocal:function(r,w){w.setCfg={scope:"local"};this.set(r,w)},setglobal:function(r,w){w.setCfg={scope:"global"};this.set(r,w)},registers:function(r,w){var F=w.args;w=cc.registerController.registers;
var Z="----------Registers----------\x3cbr\x3e\x3cbr\x3e";if(F){F=F.join("");for(var sa=0;sa<F.length;sa++)if(Ya=F.charAt(sa),cc.registerController.isValidRegister(Ya)){var ta=w[Ya]||new d;Z+='"'+Ya+"    "+ta.toString()+"\x3cbr\x3e"}}else for(var Ya in w)F=w[Ya].toString(),F.length&&(Z+='"'+Ya+"    "+F+"\x3cbr\x3e");Pa(r,Z)},sort:function(r,w){function F(Sc,sc){if(sa){var Fc=Sc;Sc=sc;sc=Fc}ta&&(Sc=Sc.toLowerCase(),sc=sc.toLowerCase());Fc=ib&&rc.exec(Sc);var Qd=ib&&rc.exec(sc);if(!Fc)return Sc<sc?
-1:1;Fc=parseInt((Fc[1]+Fc[2]).toLowerCase(),xc);Qd=parseInt((Qd[1]+Qd[2]).toLowerCase(),xc);return Fc-Qd}function Z(Sc,sc){if(sa){var Fc=Sc;Sc=sc;sc=Fc}ta&&(Sc[0]=Sc[0].toLowerCase(),sc[0]=sc[0].toLowerCase());return Sc[0]<sc[0]?-1:1}var sa,ta,Ya,ib,Qa,lb=function(){if(w.argString){var Sc=new m.StringStream(w.argString);Sc.eat("!")&&(sa=!0);if(!Sc.eol()){if(!Sc.eatSpace())return"Invalid arguments";var sc=Sc.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!sc&&!Sc.eol())return"Invalid arguments";if(sc[1]){ta=
-1!=sc[1].indexOf("i");Ya=-1!=sc[1].indexOf("u");Sc=-1!=sc[1].indexOf("d")||-1!=sc[1].indexOf("n")&&1;var Fc=-1!=sc[1].indexOf("x")&&1,Qd=-1!=sc[1].indexOf("o")&&1;if(1<Sc+Fc+Qd)return"Invalid arguments";ib=Sc&&"decimal"||Fc&&"hex"||Qd&&"octal"}sc[2]&&(Qa=new RegExp(sc[2].substr(1,sc[2].length-2),ta?"i":""))}}}();if(lb)Pa(r,lb+": "+w.argString);else{lb=w.line||r.firstLine();var Ab=w.lineEnd||w.line||r.lastLine();if(lb!=Ab){lb=B(lb,0);Ab=B(Ab,Wa(r,Ab));var Kb=r.getRange(lb,Ab).split("\n"),rc=Qa?Qa:
"decimal"==ib?/(-?)([\d]+)/:"hex"==ib?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==ib?/([0-7]+)/:null,xc="decimal"==ib?10:"hex"==ib?16:"octal"==ib?8:null,bc=[],Dc=[];if(ib||Qa)for(var Rc=0;Rc<Kb.length;Rc++){var Lc=Qa?Kb[Rc].match(Qa):null;Lc&&""!=Lc[0]?bc.push(Lc):!Qa&&rc.exec(Kb[Rc])?bc.push(Kb[Rc]):Dc.push(Kb[Rc])}else Dc=Kb;bc.sort(Qa?Z:F);if(Qa)for(Rc=0;Rc<bc.length;Rc++)bc[Rc]=bc[Rc].input;else ib||Dc.sort(F);Kb=sa?bc.concat(Dc):Dc.concat(bc);if(Ya)for(bc=Kb,Kb=[],Rc=0;Rc<bc.length;Rc++){bc[Rc]!=ed&&
Kb.push(bc[Rc]);var ed=bc[Rc]}r.replaceRange(Kb.join("\n"),lb,Ab)}}},global:function(r,w){var F=w.argString;if(F){var Z=void 0!==w.line?w.line:r.firstLine();w=w.lineEnd||w.line||r.lastLine();var sa=za(F,"/");if(sa.length){F=sa[0];var ta=sa.slice(1,sa.length).join("/")}if(F)try{wb(r,F,!0,!0)}catch(lb){Pa(r,"Invalid regex: "+F);return}F=Ta(r).getQuery();var Ya=[];for(sa="";Z<=w;Z++)F.test(r.getLine(Z))&&(Ya.push(Z+1),sa+=r.getLine(Z)+"\x3cbr\x3e");if(ta){var ib=0,Qa=function(){ib<Ya.length&&Ub.processCommand(r,
Ya[ib]+ta,{callback:Qa});ib++};Qa()}else Pa(r,sa)}else Pa(r,"Regular Expression missing from global")},substitute:function(r,w){if(!r.getSearchCursor)throw Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var F=w.argString,Z=F?za(F,F[0]):[],sa="",ta,Ya=!1,ib=!1;if(Z.length){var Qa=Z[0];Y("pcre")&&""!==Qa&&(Qa=(new RegExp(Qa)).source);sa=Z[1];Qa&&"$"===Qa[Qa.length-1]&&(Qa=Qa.slice(0,Qa.length-1)+"\\n",sa=sa?sa+"\n":"\n");if(void 0!==sa){if(Y("pcre")){sa=
sa.replace(/([^\\])&/g,"$1$$\x26");sa=new m.StringStream(sa);for(ta=[];!sa.eol();){for(;sa.peek()&&"\\"!=sa.peek();)ta.push(sa.next());F=!1;for(var lb in ec)if(sa.match(lb,!0)){F=!0;ta.push(ec[lb]);break}F||ta.push(sa.next())}sa=ta.join("")}else{lb=!1;ta=[];for(F=-1;F<sa.length;F++){var Ab=sa.charAt(F)||"",Kb=sa.charAt(F+1)||"";Qb[Ab+Kb]?(ta.push(Qb[Ab+Kb]),F++):lb?(ta.push(Ab),lb=!1):"\\"===Ab?(lb=!0,ab.test(Kb)||"$"===Kb?ta.push("$"):"/"!==Kb&&"\\"!==Kb&&ta.push("\\")):("$"===Ab&&ta.push("$"),ta.push(Ab),
"/"===Kb&&ta.push("\\"))}sa=ta.join("")}cc.lastSubstituteReplacePart=sa}ta=Z[2]?Z[2].split(" "):[]}else if(F&&F.length){Pa(r,"Substitutions should be of the form :s/pattern/replace/");return}if(ta){Z=ta[0];var rc=parseInt(ta[1]);Z&&(-1!=Z.indexOf("c")&&(Ya=!0,Z.replace("c","")),-1!=Z.indexOf("g")&&(ib=!0,Z.replace("g","")),Qa=Y("pcre")?Qa+"/"+Z:Qa.replace(/\//g,"\\/")+"/"+Z)}if(Qa)try{wb(r,Qa,!0,!0)}catch(xc){Pa(r,"Invalid regex: "+Qa);return}sa=sa||cc.lastSubstituteReplacePart;void 0===sa?Pa(r,"No previous substitute regular expression"):
(Qa=Ta(r).getQuery(),Z=void 0!==w.line?w.line:r.getCursor().line,lb=w.lineEnd||Z,Z==r.firstLine()&&lb==r.lastLine()&&(lb=Infinity),rc&&(Z=lb,lb=Z+rc-1),rc=v(r,B(Z,0)),rc=r.getSearchCursor(Qa,rc),V(r,Ya,ib,Z,lb,rc,Qa,sa,w.callback))},redo:m.commands.redo,undo:m.commands.undo,write:function(r){m.commands.save?m.commands.save(r):r.save&&r.save()},nohlsearch:function(r){$b(r)},yank:function(r){var w=da(r.getCursor()).line;r=r.getLine(w);cc.registerController.pushText("0","yank",r,!0,!0)},delmarks:function(r,
w){if(w.argString&&tb(w.argString))for(var F=r.state.vim,Z=new m.StringStream(tb(w.argString));!Z.eol();){Z.eatSpace();var sa=Z.pos;if(!Z.match(/[a-zA-Z]/,!1)){Pa(r,"Invalid argument: "+w.argString.substring(sa));break}var ta=Z.next();if(Z.match("-",!0)){if(!Z.match(/[a-zA-Z]/,!1)){Pa(r,"Invalid argument: "+w.argString.substring(sa));break}var Ya=Z.next();if(/^[a-z]$/.test(ta)&&/^[a-z]$/.test(Ya)||H(ta)&&H(Ya)){ta=ta.charCodeAt(0);Ya=Ya.charCodeAt(0);if(ta>=Ya){Pa(r,"Invalid argument: "+w.argString.substring(sa));
break}for(sa=0;sa<=Ya-ta;sa++){var ib=String.fromCharCode(ta+sa);delete F.marks[ib]}}else{Pa(r,"Invalid argument: "+ta+"-");break}}else delete F.marks[ta]}else Pa(r,"Argument required")}},Ub=new Pb;m.keyMap.vim={attach:na,detach:ha,call:ea};N("insertModeEscKeysTimeout",200,"number");m.keyMap["vim-insert"]={fallthrough:["default"],attach:na,detach:ha,call:ea};m.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:na,detach:ha,call:ea};ra();return Za}()})}
goog.provide("module$js$keymap$vim");
goog.global. module$js$keymap$vim=shadow.js.require(54, {});
