shadow$provide[16]=function(mc,Nb,Tb,Hb){!function(m,ka,Fa){L.drawVersion="1.0.4";L.Draw={};L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},
radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"\x3cstrong\x3eError:\x3c/strong\x3e shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},
simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}};
L.Draw.Event={};L.Draw.Event.CREATED="draw:created";L.Draw.Event.EDITED="draw:edited";L.Draw.Event.DELETED="draw:deleted";L.Draw.Event.DRAWSTART="draw:drawstart";L.Draw.Event.DRAWSTOP="draw:drawstop";L.Draw.Event.DRAWVERTEX="draw:drawvertex";L.Draw.Event.EDITSTART="draw:editstart";L.Draw.Event.EDITMOVE="draw:editmove";L.Draw.Event.EDITRESIZE="draw:editresize";L.Draw.Event.EDITVERTEX="draw:editvertex";L.Draw.Event.EDITSTOP="draw:editstop";L.Draw.Event.DELETESTART="draw:deletestart";L.Draw.Event.DELETESTOP=
"draw:deletestop";L.Draw.Event.TOOLBAROPENED="draw:toolbaropened";L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed";L.Draw.Event.MARKERCONTEXT="draw:markercontext";L.Draw=L.Draw||{};L.Draw.Feature=L.Handler.extend({initialize:function(u,B){this._map=u;this._container=u._container;this._overlayPane=u._panes.overlayPane;this._popupPane=u._panes.popupPane;B&&B.shapeOptions&&(B.shapeOptions=L.Util.extend({},this.options.shapeOptions,B.shapeOptions));L.setOptions(this,B);u=L.version.split(".");1===parseInt(u[0],
10)&&2<=parseInt(u[1],10)?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var u=this._map;u&&
(L.DomUtil.disableTextSelection(),u.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(u){L.setOptions(this,u)},_fireCreatedEvent:function(u){this._map.fire(L.Draw.Event.CREATED,{layer:u,layerType:this.type})},_cancelDrawing:function(u){27===
u.keyCode&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}});L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4E3,
shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2E3,factor:1,maxPoints:0},initialize:function(u,B){L.Browser.touch&&(this.options.icon=this.options.touchIcon);this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error;B&&B.drawError&&(B.drawError=L.Util.extend({},this.options.drawError,B.drawError));this.type=L.Draw.Polyline.TYPE;L.Draw.Feature.prototype.initialize.call(this,u,B)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);
this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,
this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._clearHideErrorTimeout();this._cleanUpShape();this._map.removeLayer(this._markerGroup);delete this._markerGroup;delete this._markers;
this._map.removeLayer(this._poly);delete this._poly;this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this);this._map.removeLayer(this._mouseMarker);delete this._mouseMarker;this._clearGuides();this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,
this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(1>=this._markers.length)){var u=this._markers.pop(),B=this._poly,ha=B.getLatLngs(),na=ha.splice(-1,1)[0];this._poly.setLatLngs(ha);this._markerGroup.removeLayer(u);2>B.getLatLngs().length&&this._map.removeLayer(B);this._vertexChanged(na,!1)}},addVertex:function(u){if(2<=this._markers.length&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(u))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip();
this._markers.push(this._createMarker(u));this._poly.addLatLng(u);2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly);this._vertexChanged(u,!0)},completeShape:function(){1>=this._markers.length||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var u=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs();u=this._poly.newLatLngIntersects(u[u.length-1]);if(!this.options.allowIntersection&&
u||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent();this.disable();this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(u){var B=this._map.mouseEventToLayerPoint(u.originalEvent),ha=this._map.layerPointToLatLng(B);this._currentLatLng=ha;this._updateTooltip(ha);this._updateGuide(B);this._mouseMarker.setLatLng(ha);L.DomEvent.preventDefault(u.originalEvent)},
_vertexChanged:function(u,B){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup});this._updateFinishHandler();this._updateRunningMeasure(u,B);this._clearGuides();this._updateTooltip()},_onMouseDown:function(u){this._clickHandled||this._touchHandled||this._disableMarkers||(this._onMouseMove(u),this._clickHandled=!0,this._disableNewMarkers(),u=u.originalEvent,this._startPoint.call(this,u.clientX,u.clientY))},_startPoint:function(u,B){this._mouseDownOrigin=L.point(u,B)},_onMouseUp:function(u){var B=
u.originalEvent;this._endPoint.call(this,B.clientX,B.clientY,u);this._clickHandled=null},_endPoint:function(u,B,ha){this._mouseDownOrigin&&(u=L.point(u,B).distanceTo(this._mouseDownOrigin),B=this._calculateFinishDistance(ha.latlng),1<this.options.maxPoints&&this.options.maxPoints==this._markers.length+1?(this.addVertex(ha.latlng),this._finishShape()):10>B&&L.Browser.touch?this._finishShape():Math.abs(u)<9*(m.devicePixelRatio||1)&&this.addVertex(ha.latlng),this._enableNewMarkers());this._mouseDownOrigin=
null},_onTouch:function(u){var B,ha,na=u.originalEvent;!na.touches||!na.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(B=na.touches[0].clientX,ha=na.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,B,ha),this._endPoint.call(this,B,ha,u),this._touchHandled=null);this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(u){if(0<this._markers.length){if(this.type===
L.Draw.Polyline.TYPE)var B=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;B=this._markers[0]}B=this._map.latLngToContainerPoint(B.getLatLng());u=new L.Marker(u,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});u=this._map.latLngToContainerPoint(u.getLatLng());B=B.distanceTo(u)}else B=1/0;return B},_updateFinishHandler:function(){var u=this._markers.length;1<u&&this._markers[u-1].on("click",this._finishShape,this);2<u&&this._markers[u-2].off("click",
this._finishShape,this)},_createMarker:function(u){u=new L.Marker(u,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(u),u},_updateGuide:function(u){var B=this._markers?this._markers.length:0;0<B&&(u=u||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[B-1].getLatLng()),u))},_updateTooltip:function(u){var B=this._getTooltipText();u&&this._tooltip.updatePosition(u);this._errorShown||
this._tooltip.updateContent(B)},_drawGuide:function(u,B){var ha=Math.floor(Math.sqrt(Math.pow(B.x-u.x,2)+Math.pow(B.y-u.y,2))),na=this.options.guidelineDistance;var Ca=this.options.maxGuideLineLength;na=ha>Ca?ha-Ca:na;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));na<ha;na+=this.options.guidelineDistance){Ca=na/ha;Ca={x:Math.floor(u.x*(1-Ca)+Ca*B.x),y:Math.floor(u.y*(1-Ca)+Ca*B.y)};var La=L.DomUtil.create("div","leaflet-draw-guide-dash",
this._guidesContainer);La.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color;L.DomUtil.setPosition(La,Ca)}},_updateGuideColor:function(u){if(this._guidesContainer)for(var B=0,ha=this._guidesContainer.childNodes.length;B<ha;B++)this._guidesContainer.childNodes[B].style.backgroundColor=u},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var u,
B,ha=this.options.showLength;return 0===this._markers.length?u={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(B=ha?this._getMeasurementString():"",u=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:B}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:B}),u},_updateRunningMeasure:function(u,B){var ha,na,Ca=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(ha=Ca-(B?2:1),na=L.GeometryUtil.isVersion07x()?u.distanceTo(this._markers[ha].getLatLng())*
(this.options.factor||1):this._map.distance(u,this._markers[ha].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=na*(B?1:-1))},_getMeasurementString:function(){var u,B=this._currentLatLng,ha=this._markers[this._markers.length-1].getLatLng();return u=L.GeometryUtil.isVersion07x()?ha&&B&&B.distanceTo?this._measurementRunningTotal+B.distanceTo(ha)*(this.options.factor||1):this._measurementRunningTotal||0:ha&&B?this._measurementRunningTotal+this._map.distance(B,ha)*(this.options.factor||
1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(u,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0;this._tooltip.showAsError().updateContent({text:this.options.drawError.message});this._updateGuideColor(this.options.drawError.color);this._poly.setStyle({color:this.options.drawError.color});this._clearHideErrorTimeout();this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},
_hideErrorTooltip:function(){this._errorShown=!1;this._clearHideErrorTimeout();this._tooltip.removeError().updateContent(this._getTooltipText());this._updateGuideColor(this.options.shapeOptions.color);this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=
!1}.bind(this),50)},_cleanUpShape:function(){1<this._markers.length&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var u=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,u)}});L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,
clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(u,B){L.Draw.Polyline.prototype.initialize.call(this,u,B);this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var u=this._markers.length;1===u&&this._markers[0].on("click",this._finishShape,this);2<u&&(this._markers[u-1].on("dblclick",this._finishShape,this),3<u&&this._markers[u-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var u,B;return 0===this._markers.length?u=L.drawLocal.draw.handlers.polygon.tooltip.start:
3>this._markers.length?(u=L.drawLocal.draw.handlers.polygon.tooltip.cont,B=this._getMeasurementString()):(u=L.drawLocal.draw.handlers.polygon.tooltip.end,B=this._getMeasurementString()),{text:u,subtext:B}},_getMeasurementString:function(){var u=this._area,B="";return u||this.options.showLength?(this.options.showLength&&(B=L.Draw.Polyline.prototype._getMeasurementString.call(this)),u&&(B+="\x3cbr\x3e"+L.GeometryUtil.readableArea(u,this.options.metric,this.options.precision)),B):null},_shapeIsValid:function(){return 3<=
this._markers.length},_vertexChanged:function(u,B){var ha;!this.options.allowIntersection&&this.options.showArea&&(ha=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(ha));L.Draw.Polyline.prototype._vertexChanged.call(this,u,B)},_cleanUpShape:function(){var u=this._markers.length;0<u&&(this._markers[0].off("click",this._finishShape,this),2<u&&this._markers[u-1].off("dblclick",this._finishShape,this))}});L.SimpleShape={};L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},
initialize:function(u,B){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end;L.Draw.Feature.prototype.initialize.call(this,u,B)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,
this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),ka.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(ka,
"mouseup",this._onMouseUp,this),L.DomEvent.off(ka,"touchend",this._onMouseUp,this),ka.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape));this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(u){this._isDrawing=!0;this._startLatLng=u.latlng;L.DomEvent.on(ka,"mouseup",this._onMouseUp,this).on(ka,"touchend",this._onMouseUp,this).preventDefault(u.originalEvent)},_onMouseMove:function(u){u=
u.latlng;this._tooltip.updatePosition(u);this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(u))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent();this.disable();this.options.repeatMode&&this.enable()}});L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(u,B){this.type=L.Draw.Rectangle.TYPE;
this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start;L.Draw.SimpleShape.prototype.initialize.call(this,u,B)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(u){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);var B;if(B=this._isCurrentlyTwoClickDrawing){for(u=u.target;(u=u.parentElement)&&!u.classList.contains("leaflet-pane"););B=!u}B||
L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(u){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,u)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,u),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var u=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,u)},_getTooltipText:function(){var u,B,ha,na=L.Draw.SimpleShape.prototype._getTooltipText.call(this),
Ca=this.options.showArea;return this._shape&&(u=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),B=L.GeometryUtil.geodesicArea(u),ha=Ca?L.GeometryUtil.readableArea(B,this.options.metric):""),{text:na.text,subtext:ha}}});L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2E3},initialize:function(u,B){this.type=L.Draw.Marker.TYPE;this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start;L.Draw.Feature.prototype.initialize.call(this,
u,B)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,
this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(u){u=u.latlng;this._tooltip.updatePosition(u);
this._mouseMarker.setLatLng(u);this._marker?(u=this._mouseMarker.getLatLng(),this._marker.setLatLng(u)):(this._marker=this._createMarker(u),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(u){return new L.Marker(u,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent();this.disable();this.options.repeatMode&&this.enable()},_onTouch:function(u){this._onMouseMove(u);
this._onClick()},_fireCreatedEvent:function(){var u=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,u)}});L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2E3},initialize:function(u,B){this.type=L.Draw.CircleMarker.TYPE;this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start;
L.Draw.Feature.prototype.initialize.call(this,u,B)},_fireCreatedEvent:function(){var u=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,u)},_createMarker:function(u){return new L.CircleMarker(u,this.options)}});L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},
initialize:function(u,B){this.type=L.Draw.Circle.TYPE;this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start;L.Draw.SimpleShape.prototype.initialize.call(this,u,B)},_drawShape:function(u){u=L.GeometryUtil.isVersion07x()?this._startLatLng.distanceTo(u):this._map.distance(this._startLatLng,u);this._shape?this._shape.setRadius(u):(this._shape=new L.Circle(this._startLatLng,u,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var u=new L.Circle(this._startLatLng,
this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,u)},_onMouseMove:function(u){var B=u.latlng;u=this.options.showRadius;var ha=this.options.metric;if(this._tooltip.updatePosition(B),this._isDrawing){this._drawShape(B);B=this._shape.getRadius().toFixed(1);var na="";u&&(na=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(B,ha,this.options.feet,this.options.nautic));this._tooltip.updateContent({text:this._endLabelText,
subtext:na})}}});L.Edit=L.Edit||{};L.Edit.Marker=L.Handler.extend({initialize:function(u,B){this._marker=u;L.setOptions(this,B)},addHooks:function(){var u=this._marker;u.dragging.enable();u.on("dragend",this._onDragEnd,u);this._toggleMarkerHighlight()},removeHooks:function(){var u=this._marker;u.dragging.disable();u.off("dragend",this._onDragEnd,u);this._toggleMarkerHighlight()},_onDragEnd:function(u){u=u.target;u.edited=!0;this._map.fire(L.Draw.Event.EDITMOVE,{layer:u})},_toggleMarkerHighlight:function(){var u=
this._marker._icon;u&&(u.style.display="none",L.DomUtil.hasClass(u,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(u,"leaflet-edit-marker-selected"),this._offsetMarker(u,-4)):(L.DomUtil.addClass(u,"leaflet-edit-marker-selected"),this._offsetMarker(u,4)),u.style.display="")},_offsetMarker:function(u,B){var ha=parseInt(u.style.marginTop,10)-B;B=parseInt(u.style.marginLeft,10)-B;u.style.marginTop=ha+"px";u.style.marginLeft=B+"px"}});L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=
new L.Edit.Marker(this),this.options.editable&&this.editing.enable())});L.Edit=L.Edit||{};L.Edit.Poly=L.Handler.extend({initialize:function(u){this.latlngs=[u._latlngs];u._holes&&(this.latlngs=this.latlngs.concat(u._holes));this._poly=u;this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(u){for(var B=0;B<this._verticesHandlers.length;B++)u(this._verticesHandlers[B])},
addHooks:function(){this._initHandlers();this._eachVertexHandler(function(u){u.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(u){u.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(u){u.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var u=0;u<this.latlngs.length;u++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[u],this._poly.options.poly))},_updateLatLngs:function(u){this.latlngs=[u.layer._latlngs];
u.layer._holes&&(this.latlngs=this.latlngs.concat(u.layer._holes))}});L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1E3}},initialize:function(u,B,ha){L.Browser.touch&&(this.options.icon=this.options.touchIcon);this._poly=u;ha&&ha.drawError&&
(ha.drawError=L.Util.extend({},this.options.drawError,ha.drawError));this._latlngs=B;L.setOptions(this,ha)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var u=this._poly,B=u._path;u instanceof L.Polygon||(u.options.fill=!1,u.options.editing&&(u.options.editing.fill=!1));B&&u.options.editing&&u.options.editing.className&&(u.options.original.className&&u.options.original.className.split(" ").forEach(function(ha){L.DomUtil.removeClass(B,
ha)}),u.options.editing.className.split(" ").forEach(function(ha){L.DomUtil.addClass(B,ha)}));u.setStyle(u.options.editing);this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var u=this._poly,B=u._path;B&&u.options.editing&&u.options.editing.className&&(u.options.editing.className.split(" ").forEach(function(ha){L.DomUtil.removeClass(B,ha)}),u.options.original.className&&u.options.original.className.split(" ").forEach(function(ha){L.DomUtil.addClass(B,
ha)}));u.setStyle(u.options.original);u._map&&(u._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers();this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup);this._markers=[];var u,B=this._defaultShape();var ha=0;for(u=B.length;ha<u;ha++){var na=this._createMarker(B[ha],ha);na.on("click",this._onMarkerClick,this);na.on("contextmenu",this._onContextMenu,this);this._markers.push(na)}var Ca,
La;ha=0;for(na=u-1;ha<u;na=ha++)(0!==ha||L.Polygon&&this._poly instanceof L.Polygon)&&(Ca=this._markers[na],La=this._markers[ha],this._createMiddleMarker(Ca,La),this._updatePrevNext(Ca,La))},_createMarker:function(u,B){var ha=new L.Marker.Touch(u,{draggable:!0,icon:this.options.icon});return ha._origLatLng=u,ha._index=B,ha.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,
this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(ha),ha},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var u=this._defaultShape(),B=[].splice.apply(u,arguments);return this._poly._convertLatLngs(u,!0),this._poly.redraw(),B},_removeMarker:function(u){var B=u._index;this._markerGroup.removeLayer(u);this._markers.splice(B,1);this._spliceLatLngs(B,1);this._updateIndexes(B,-1);u.off("dragstart",this._onMarkerDragStart,
this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0;this._poly.fire("edit");this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(u){u=u.target;var B=this._poly,ha=L.LatLngUtil.cloneLatLng(u._origLatLng);
if(L.extend(u._origLatLng,u._latlng),B.options.poly){var na=B._map._editTooltip;if(!B.options.poly.allowIntersection&&B.intersects()){L.extend(u._origLatLng,ha);u.setLatLng(ha);var Ca=B.options.color;B.setStyle({color:this.options.drawError.color});na&&na.updateContent({text:L.drawLocal.draw.handlers.polyline.error});setTimeout(function(){B.setStyle({color:Ca});na&&na.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1E3)}}u._middleLeft&&
u._middleLeft.setLatLng(this._getMiddleLatLng(u._prev,u));u._middleRight&&u._middleRight.setLatLng(this._getMiddleLatLng(u,u._next));this._poly._bounds._southWest=L.latLng(1/0,1/0);this._poly._bounds._northEast=L.latLng(-1/0,-1/0);u=this._poly.getLatLngs();this._poly._convertLatLngs(u,!0);this._poly.redraw();this._poly.fire("editdrag")},_onMarkerClick:function(u){var B=L.Polygon&&this._poly instanceof L.Polygon?4:3;u=u.target;this._defaultShape().length<B||(this._removeMarker(u),this._updatePrevNext(u._prev,
u._next),u._middleLeft&&this._markerGroup.removeLayer(u._middleLeft),u._middleRight&&this._markerGroup.removeLayer(u._middleRight),u._prev&&u._next?this._createMiddleMarker(u._prev,u._next):u._prev?u._next||(u._prev._middleRight=null):u._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(u){u=u.target;this._poly;this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:u,layers:this._markerGroup,poly:this._poly});L.DomEvent.stopPropagation},_onTouchMove:function(u){var B=this._map.mouseEventToLayerPoint(u.originalEvent.touches[0]);
B=this._map.layerPointToLatLng(B);u=u.target;L.extend(u._origLatLng,B);u._middleLeft&&u._middleLeft.setLatLng(this._getMiddleLatLng(u._prev,u));u._middleRight&&u._middleRight.setLatLng(this._getMiddleLatLng(u,u._next));this._poly.redraw();this.updateMarkers()},_updateIndexes:function(u,B){this._markerGroup.eachLayer(function(ha){ha._index>u&&(ha._index+=B)})},_createMiddleMarker:function(u,B){var ha=this._getMiddleLatLng(u,B),na=this._createMarker(ha);na.setOpacity(.6);u._middleRight=B._middleLeft=
na;var Ca=function(){na.off("touchmove",Ca,this);var Q=B._index;na._index=Q;na.off("click",ea,this).on("click",this._onMarkerClick,this);ha.lat=na.getLatLng().lat;ha.lng=na.getLatLng().lng;this._spliceLatLngs(Q,0,ha);this._markers.splice(Q,0,na);na.setOpacity(1);this._updateIndexes(Q,1);B._index++;this._updatePrevNext(u,na);this._updatePrevNext(na,B);this._poly.fire("editstart")};var La=function(){na.off("dragstart",Ca,this);na.off("dragend",La,this);na.off("touchmove",Ca,this);this._createMiddleMarker(u,
na);this._createMiddleMarker(na,B)};var ea=function(){Ca.call(this);La.call(this);this._fireEdit()};na.on("click",ea,this).on("dragstart",Ca,this).on("dragend",La,this).on("touchmove",Ca,this);this._markerGroup.addLayer(na)},_updatePrevNext:function(u,B){u&&(u._next=B);B&&(B._prev=u)},_getMiddleLatLng:function(u,B){var ha=this._poly._map;u=ha.project(u.getLatLng());B=ha.project(B.getLatLng());return ha.unproject(u._add(B)._divideBy(2))}});L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&
(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))});L.Edit=L.Edit||{};L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,
8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(u,B){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon);
this._shape=u;L.Util.setOptions(this,B)},addHooks:function(){var u=this._shape;this._shape._map&&(this._map=this._shape._map,u.setStyle(u.options.editing),u._map&&(this._map=u._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var u=this._shape;if(u.setStyle(u.options.original),u._map){this._unbindMarker(this._moveMarker);u=0;for(var B=this._resizeMarkers.length;u<B;u++)this._unbindMarker(this._resizeMarkers[u]);this._resizeMarkers=null;this._map.removeLayer(this._markerGroup);
delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers();this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup);this._createMoveMarker();this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(u,B){u=new L.Marker.Touch(u,{draggable:!0,icon:B,zIndexOffset:10});return this._bindMarker(u),this._markerGroup.addLayer(u),u},_bindMarker:function(u){u.on("dragstart",
this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(u){u.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",
this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(u){u.target.setOpacity(0);this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0;this._shape.fire("edit")},_onMarkerDrag:function(u){u=u.target;var B=u.getLatLng();u===this._moveMarker?this._move(B):this._resize(B);this._shape.redraw();this._shape.fire("editdrag")},_onMarkerDragEnd:function(u){u.target.setOpacity(1);
this._fireEdit()},_onTouchStart:function(u){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,u),"function"==typeof this._getCorners){var B=this._getCorners();u=u.target;var ha=u._cornerIndex;u.setOpacity(0);this._oppositeCorner=B[(ha+2)%4];this._toggleCornerMarkers(0,ha)}this._shape.fire("editstart")},_onTouchMove:function(u){var B=this._map.mouseEventToLayerPoint(u.originalEvent.touches[0]);B=this._map.layerPointToLatLng(B);return u.target===this._moveMarker?this._move(B):this._resize(B),
this._shape.redraw(),!1},_onTouchEnd:function(u){u.target.setOpacity(1);this.updateMarkers();this._fireEdit()},_move:function(){},_resize:function(){}});L.Edit=L.Edit||{};L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var u=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(u,this.options.moveIcon)},_createResizeMarker:function(){var u=this._getCorners();this._resizeMarkers=[];for(var B=0,ha=u.length;B<ha;B++)this._resizeMarkers.push(this._createMarker(u[B],
this.options.resizeIcon)),this._resizeMarkers[B]._cornerIndex=B},_onMarkerDragStart:function(u){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,u);var B=this._getCorners();u=u.target._cornerIndex;this._oppositeCorner=B[(u+2)%4];this._toggleCornerMarkers(0,u)},_onMarkerDragEnd:function(u){var B,ha,na=u.target;na===this._moveMarker&&(B=this._shape.getBounds(),ha=B.getCenter(),na.setLatLng(ha));this._toggleCornerMarkers(1);this._repositionCornerMarkers();L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,
u)},_move:function(u){for(var B,ha=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),na=this._shape.getBounds().getCenter(),Ca=[],La=0,ea=ha.length;La<ea;La++)B=[ha[La].lat-na.lat,ha[La].lng-na.lng],Ca.push([u.lat+B[0],u.lng+B[1]]);this._shape.setLatLngs(Ca);this._repositionCornerMarkers();this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(u){this._shape.setBounds(L.latLngBounds(u,this._oppositeCorner));u=this._shape.getBounds();this._moveMarker.setLatLng(u.getCenter());
this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var u=this._shape.getBounds();return[u.getNorthWest(),u.getNorthEast(),u.getSouthEast(),u.getSouthWest()]},_toggleCornerMarkers:function(u){for(var B=0,ha=this._resizeMarkers.length;B<ha;B++)this._resizeMarkers[B].setOpacity(u)},_repositionCornerMarkers:function(){for(var u=this._getCorners(),B=0,ha=this._resizeMarkers.length;B<ha;B++)this._resizeMarkers[B].setLatLng(u[B])}});L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&
(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())});L.Edit=L.Edit||{};L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var u=this._shape.getLatLng();this._moveMarker=this._createMarker(u,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(u){if(this._resizeMarkers.length){var B=this._getResizeMarkerPoint(u);this._resizeMarkers[0].setLatLng(B)}this._shape.setLatLng(u);this._map.fire(L.Draw.Event.EDITMOVE,
{layer:this._shape})}});L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable());this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()});this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})});L.Edit=L.Edit||{};L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var u=this._shape.getLatLng();u=this._getResizeMarkerPoint(u);
this._resizeMarkers=[];this._resizeMarkers.push(this._createMarker(u,this.options.resizeIcon))},_getResizeMarkerPoint:function(u){var B=this._shape._radius*Math.cos(Math.PI/4);u=this._map.project(u);return this._map.unproject([u.x+B,u.y-B])},_resize:function(u){var B=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=B.distanceTo(u):radius=this._map.distance(B,u);this._shape.setRadius(radius);this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+
"\x3cbr /\x3e"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)});this._shape.setRadius(radius);this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}});L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())});L.Map.mergeOptions({touchExtend:!0});L.Map.TouchExtend=L.Handler.extend({initialize:function(u){this._map=
u;this._container=u._container;this._pane=u._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this);L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this);L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this);this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,
this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this);L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this);L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this);this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",
this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(u,B){if(void 0!==u.touches){if(!u.touches.length)return;var ha=u.touches[0]}else if("touch"!==u.pointerType||
(ha=u,!this._filterClick(u)))return;var na=this._map.mouseEventToContainerPoint(ha),Ca=this._map.mouseEventToLayerPoint(ha),La=this._map.layerPointToLatLng(Ca);this._map.fire(B,{latlng:La,layerPoint:Ca,containerPoint:na,pageX:ha.pageX,pageY:ha.pageY,originalEvent:u})},_filterClick:function(u){var B=u.timeStamp||u.originalEvent.timeStamp,ha=L.DomEvent._lastClick&&B-L.DomEvent._lastClick;return ha&&100<ha&&500>ha||u.target._simulatedClick&&!u._simulated?(L.DomEvent.stop(u),!1):(L.DomEvent._lastClick=
B,!0)},_onTouchStart:function(u){this._map._loaded&&this._touchEvent(u,"touchstart")},_onTouchEnd:function(u){this._map._loaded&&this._touchEvent(u,"touchend")},_onTouchCancel:function(u){if(this._map._loaded){var B="touchcancel";this._detectIE()&&(B="pointercancel");this._touchEvent(u,B)}},_onTouchLeave:function(u){this._map._loaded&&this._touchEvent(u,"touchleave")},_onTouchMove:function(u){this._map._loaded&&this._touchEvent(u,"touchmove")},_detectIE:function(){var u=m.navigator.userAgent,B=u.indexOf("MSIE ");
if(0<B)return parseInt(u.substring(B+5,u.indexOf(".",B)),10);if(0<u.indexOf("Trident/"))return B=u.indexOf("rv:"),parseInt(u.substring(B+3,u.indexOf(".",B)),10);B=u.indexOf("Edge/");return 0<B&&parseInt(u.substring(B+5,u.indexOf(".",B)),10)}});L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend);L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var u=
this._icon,B="dblclick mousedown mouseover mouseout contextmenu touchstart touchend touchmove".split(" ");this._detectIE?B.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):B.concat(["touchcancel"]);L.DomUtil.addClass(u,"leaflet-clickable");L.DomEvent.on(u,"click",this._onMouseClick,this);L.DomEvent.on(u,"keypress",this._onKeyPress,this);for(var ha=0;ha<B.length;ha++)L.DomEvent.on(u,B[ha],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),
this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var u=m.navigator.userAgent,B=u.indexOf("MSIE ");if(0<B)return parseInt(u.substring(B+5,u.indexOf(".",B)),10);if(0<u.indexOf("Trident/"))return B=u.indexOf("rv:"),parseInt(u.substring(B+3,u.indexOf(".",B)),10);B=u.indexOf("Edge/");return 0<B&&parseInt(u.substring(B+5,u.indexOf(".",B)),10)}});L.LatLngUtil={cloneLatLngs:function(u){for(var B=[],ha=0,na=u.length;ha<na;ha++)Array.isArray(u[ha])?B.push(L.LatLngUtil.cloneLatLngs(u[ha])):
B.push(this.cloneLatLng(u[ha]));return B},cloneLatLng:function(u){return L.latLng(u.lat,u.lng)}};(function(){var u={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(B){var ha=B.length,na=0,Ca=Math.PI/180;if(2<ha){for(var La=0;La<ha;La++){var ea=B[La];var Q=B[(La+1)%ha];na+=(Q.lng-ea.lng)*Ca*(2+Math.sin(ea.lat*Ca)+Math.sin(Q.lat*Ca))}na=40680631590769*na/2}return Math.abs(na)},formattedNumber:function(B,ha){B=parseFloat(B).toFixed(ha);var na=
(ha=L.drawLocal.format&&L.drawLocal.format.numeric)&&ha.delimiters;ha=na&&na.thousands;na=na&&na.decimal;if(ha||na){var Ca=B.split(".");B=ha?Ca[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+ha):Ca[0];1<Ca.length&&(B=B+(na||".")+Ca[1])}return B},readableArea:function(B,ha,na){var Ca,La;na=L.Util.extend({},u,na);return ha?(La=["ha","m"],type=typeof ha,"string"===type?La=[ha]:"boolean"!==type&&(La=ha),Ca=1E6<=B&&-1!==La.indexOf("km")?L.GeometryUtil.formattedNumber(1E-6*B,na.km)+" km²":1E4<=B&&-1!==La.indexOf("ha")?
L.GeometryUtil.formattedNumber(1E-4*B,na.ha)+" ha":L.GeometryUtil.formattedNumber(B,na.m)+" m²"):(B/=.836127,Ca=3097600<=B?L.GeometryUtil.formattedNumber(B/3097600,na.mi)+" mi²":4840<=B?L.GeometryUtil.formattedNumber(B/4840,na.ac)+" acres":L.GeometryUtil.formattedNumber(B,na.yd)+" yd²"),Ca},readableDistance:function(B,ha,na,Ca,La){La=L.Util.extend({},u,La);switch(ha?"string"==typeof ha?ha:"metric":na?"feet":Ca?"nauticalMile":"yards"){case "metric":B=1E3<B?L.GeometryUtil.formattedNumber(B/1E3,La.km)+
" km":L.GeometryUtil.formattedNumber(B,La.m)+" m";break;case "feet":B=L.GeometryUtil.formattedNumber(3.28083*B,La.ft)+" ft";break;case "nauticalMile":B=L.GeometryUtil.formattedNumber(.53996*B/1E3,La.nm)+" nm";break;default:B*=1.09361,B=1760<B?L.GeometryUtil.formattedNumber(B/1760,La.mi)+" miles":L.GeometryUtil.formattedNumber(B,La.yd)+" yd"}return B},isVersion07x:function(){var B=L.version.split(".");return 0===parseInt(B[0],10)&&7===parseInt(B[1],10)}})})();L.Util.extend(L.LineUtil,{segmentsIntersect:function(u,
B,ha,na){return this._checkCounterclockwise(u,ha,na)!==this._checkCounterclockwise(B,ha,na)&&this._checkCounterclockwise(u,B,ha)!==this._checkCounterclockwise(u,B,na)},_checkCounterclockwise:function(u,B,ha){return(ha.y-u.y)*(B.x-u.x)>(B.y-u.y)*(ha.x-u.x)}});L.Polyline.include({intersects:function(){var u,B,ha=this._getProjectedPoints();var na=ha?ha.length:0;if(this._tooFewPointsForIntersection())return!1;for(--na;3<=na;na--)if(u=ha[na-1],B=ha[na],this._lineSegmentsIntersectsRange(u,B,na-2))return!0;
return!1},newLatLngIntersects:function(u,B){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(u),B)},newPointIntersects:function(u,B){var ha=this._getProjectedPoints(),na=ha?ha.length:0;ha=ha?ha[na-1]:null;na-=2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(ha,u,na,B?1:0)},_tooFewPointsForIntersection:function(u){var B=this._getProjectedPoints(),ha=B?B.length:0;return ha+=u||0,!B||3>=ha},_lineSegmentsIntersectsRange:function(u,B,ha,na){var Ca,
La,ea=this._getProjectedPoints();for(na=na||0;ha>na;ha--)if(Ca=ea[ha-1],La=ea[ha],L.LineUtil.segmentsIntersect(u,B,Ca,La))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var u=[],B=this._defaultShape(),ha=0;ha<B.length;ha++)u.push(this._map.latLngToLayerPoint(B[ha]));return u}});L.Polygon.include({intersects:function(){var u,B,ha,na,Ca=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||
(u=Ca.length,B=Ca[0],ha=Ca[u-1],na=u-2,this._lineSegmentsIntersectsRange(ha,B,na,1)))}});L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(u){if("0.7">L.version)throw Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,u);var B;this._toolbars={};L.DrawToolbar&&this.options.draw&&(B=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=
B,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this));L.EditToolbar&&this.options.edit&&(B=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=B,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this));L.toolbar=this},onAdd:function(u){var B,ha=L.DomUtil.create("div","leaflet-draw"),na=!1,Ca;for(Ca in this._toolbars)this._toolbars.hasOwnProperty(Ca)&&(B=this._toolbars[Ca].addToolbar(u))&&(na||(L.DomUtil.hasClass(B,"leaflet-draw-toolbar-top")||
L.DomUtil.addClass(B.childNodes[0],"leaflet-draw-toolbar-top"),na=!0),ha.appendChild(B));return ha},onRemove:function(){for(var u in this._toolbars)this._toolbars.hasOwnProperty(u)&&this._toolbars[u].removeToolbar()},setDrawingOptions:function(u){for(var B in this._toolbars)this._toolbars[B]instanceof L.DrawToolbar&&this._toolbars[B].setOptions(u)},_toolbarEnabled:function(u){u=u.target;for(var B in this._toolbars)this._toolbars[B]!==u&&this._toolbars[B].disable()}});L.Map.mergeOptions({drawControlTooltips:!0,
drawControl:!1});L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))});L.Toolbar=L.Class.extend({initialize:function(u){L.setOptions(this,u);this._modes={};this._actionButtons=[];this._activeMode=null;u=L.version.split(".");1===parseInt(u[0],10)&&2<=parseInt(u[1],10)?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&
this._activeMode.handler.disable()},addToolbar:function(u){var B=L.DomUtil.create("div","leaflet-draw-section"),ha=0,na=this._toolbarClass||"",Ca=this.getModeHandlers(u);this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar");this._map=u;for(u=0;u<Ca.length;u++)Ca[u].enabled&&this._initModeHandler(Ca[u].handler,this._toolbarContainer,ha++,na,Ca[u].title);if(ha)return this._lastButtonIndex=--ha,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),B.appendChild(this._toolbarContainer),
B.appendChild(this._actionsContainer),B},removeToolbar:function(){for(var u in this._modes)this._modes.hasOwnProperty(u)&&(this._disposeButton(this._modes[u].button,this._modes[u].handler.enable,this._modes[u].handler),this._modes[u].handler.disable(),this._modes[u].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};u=0;for(var B=this._actionButtons.length;u<B;u++)this._disposeButton(this._actionButtons[u].button,this._actionButtons[u].callback,
this);this._actionButtons=[];this._actionsContainer=null},_initModeHandler:function(u,B,ha,na,Ca){var La=u.type;this._modes[La]={};this._modes[La].handler=u;this._modes[La].button=this._createButton({type:La,title:Ca,className:na+"-"+La,container:B,callback:this._modes[La].handler.enable,context:this._modes[La].handler});this._modes[La].buttonIndex=ha;this._modes[La].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&
!m.MSStream},_createButton:function(u){var B=L.DomUtil.create("a",u.className||"",u.container),ha=L.DomUtil.create("span","sr-only",u.container);B.href="#";B.appendChild(ha);u.title&&(B.title=u.title,ha.innerHTML=u.title);u.text&&(B.innerHTML=u.text,ha.innerHTML=u.text);ha=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(B,"click",L.DomEvent.stopPropagation).on(B,"mousedown",L.DomEvent.stopPropagation).on(B,"dblclick",L.DomEvent.stopPropagation).on(B,"touchstart",L.DomEvent.stopPropagation).on(B,
"click",L.DomEvent.preventDefault).on(B,ha,u.callback,u.context),B},_disposeButton:function(u,B){var ha=this._detectIOS()?"touchstart":"click";L.DomEvent.off(u,"click",L.DomEvent.stopPropagation).off(u,"mousedown",L.DomEvent.stopPropagation).off(u,"dblclick",L.DomEvent.stopPropagation).off(u,"touchstart",L.DomEvent.stopPropagation).off(u,"click",L.DomEvent.preventDefault).off(u,ha,B)},_handlerActivated:function(u){this.disable();this._activeMode=this._modes[u.handler];L.DomUtil.addClass(this._activeMode.button,
"leaflet-draw-toolbar-button-enabled");this._showActionsToolbar();this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar();L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled");this._activeMode=null;this.fire("disable")},_createActions:function(u){var B,ha,na,Ca=this._actionsContainer;u=this.getActions(u);var La=u.length;var ea=0;for(ha=this._actionButtons.length;ea<ha;ea++)this._disposeButton(this._actionButtons[ea].button,this._actionButtons[ea].callback);
for(this._actionButtons=[];Ca.firstChild;)Ca.removeChild(Ca.firstChild);for(ea=0;ea<La;ea++)"enabled"in u[ea]&&!u[ea].enabled||(B=L.DomUtil.create("li","",Ca),na=this._createButton({title:u[ea].title,text:u[ea].text,container:B,callback:u[ea].callback,context:u[ea].context}),this._actionButtons.push({button:na,callback:u[ea].callback}))},_showActionsToolbar:function(){var u=this._activeMode.buttonIndex,B=this._lastButtonIndex,ha=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler);
this._actionsContainer.style.top=ha+"px";0===u&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top"));u===B&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom"));this._actionsContainer.style.display="block";this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display=
"none";L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop");L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom");L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top");L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom");this._map.fire(L.Draw.Event.TOOLBARCLOSED)}});L.Draw=L.Draw||{};L.Draw.Tooltip=L.Class.extend({initialize:function(u){this._map=u;this._popupPane=u._panes.popupPane;this._visible=!1;this._container=
u.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null;this._singleLineLabel=!1;this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this);this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(u){return this._container?(u.subtext=u.subtext||"",0!==u.subtext.length||this._singleLineLabel?0<u.subtext.length&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,
"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(0<u.subtext.length?'\x3cspan class\x3d"leaflet-draw-tooltip-subtext"\x3e'+u.subtext+"\x3c/span\x3e\x3cbr /\x3e":"")+"\x3cspan\x3e"+u.text+"\x3c/span\x3e",u.text||u.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(u){u=
this._map.latLngToLayerPoint(u);var B=this._container;return this._container&&(this._visible&&(B.style.visibility="inherit"),L.DomUtil.setPosition(B,u)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}});L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},
options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(u){for(var B in this.options)this.options.hasOwnProperty(B)&&u[B]&&(u[B]=L.extend({},this.options[B],u[B]));this._toolbarClass="leaflet-draw-draw";L.Toolbar.prototype.initialize.call(this,u)},getModeHandlers:function(u){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(u,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(u,
this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(u,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(u,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(u,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(u,
this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(u){return[{enabled:u.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:u.completeShape,context:u},{enabled:u.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:u.deleteLastVertex,context:u},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,
context:this}]},setOptions:function(u){L.setOptions(this,u);for(var B in this._modes)this._modes.hasOwnProperty(B)&&u.hasOwnProperty(B)&&this._modes[B].handler.setOptions(u[B])}});L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(u){u.edit&&(void 0===u.edit.selectedPathOptions&&(u.edit.selectedPathOptions=this.options.edit.selectedPathOptions),
u.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,u.edit.selectedPathOptions));u.remove&&(u.remove=L.extend({},this.options.remove,u.remove));u.poly&&(u.poly=L.extend({},this.options.poly,u.poly));this._toolbarClass="leaflet-draw-edit";L.Toolbar.prototype.initialize.call(this,u);this._selectedFeatureCount=0},getModeHandlers:function(u){var B=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(u,{featureGroup:B,selectedPathOptions:this.options.edit.selectedPathOptions,
poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(u,{featureGroup:B}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(u){var B=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];
return u.removeAllLayers&&B.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),B},addToolbar:function(u){u=L.Toolbar.prototype.addToolbar.call(this,u);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),u},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this);L.Toolbar.prototype.removeToolbar.call(this)},
disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save();this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers();this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var u,B=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(u=this._modes[L.EditToolbar.Edit.TYPE].button,B?L.DomUtil.removeClass(u,
"leaflet-disabled"):L.DomUtil.addClass(u,"leaflet-disabled"),u.setAttribute("title",B?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled));this.options.remove&&(u=this._modes[L.EditToolbar.Delete.TYPE].button,B?L.DomUtil.removeClass(u,"leaflet-disabled"):L.DomUtil.addClass(u,"leaflet-disabled"),u.setAttribute("title",B?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}});L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},
initialize:function(u,B){if(L.Handler.prototype.initialize.call(this,u),L.setOptions(this,B),this._featureGroup=B.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={};this.type=L.EditToolbar.Edit.TYPE;u=L.version.split(".");1===parseInt(u[0],10)&&2<=parseInt(u[1],10)?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&
(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",
{handler:this.type}))},addHooks:function(){var u=this._map;u&&(u.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),u._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,
this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(u){this._revertLayer(u)},this)},save:function(){var u=new L.LayerGroup;
this._featureGroup.eachLayer(function(B){B.edited&&(u.addLayer(B),B.edited=!1)});this._map.fire(L.Draw.Event.EDITED,{layers:u})},_backupLayer:function(u){var B=L.Util.stamp(u);this._uneditedLayerProps[B]||(u instanceof L.Polyline||u instanceof L.Polygon||u instanceof L.Rectangle?this._uneditedLayerProps[B]={latlngs:L.LatLngUtil.cloneLatLngs(u.getLatLngs())}:u instanceof L.Circle?this._uneditedLayerProps[B]={latlng:L.LatLngUtil.cloneLatLng(u.getLatLng()),radius:u.getRadius()}:(u instanceof L.Marker||
u instanceof L.CircleMarker)&&(this._uneditedLayerProps[B]={latlng:L.LatLngUtil.cloneLatLng(u.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(u){var B=L.Util.stamp(u);u.edited=!1;this._uneditedLayerProps.hasOwnProperty(B)&&(u instanceof L.Polyline||u instanceof L.Polygon||u instanceof L.Rectangle?
u.setLatLngs(this._uneditedLayerProps[B].latlngs):u instanceof L.Circle?(u.setLatLng(this._uneditedLayerProps[B].latlng),u.setRadius(this._uneditedLayerProps[B].radius)):(u instanceof L.Marker||u instanceof L.CircleMarker)&&u.setLatLng(this._uneditedLayerProps[B].latlng),u.fire("revert-edited",{layer:u}))},_enableLayerEdit:function(u){var B,ha;u=u.layer||u.target||u;this._backupLayer(u);this.options.poly&&(ha=L.Util.extend({},this.options.poly),u.options.poly=ha);this.options.selectedPathOptions&&
(B=L.Util.extend({},this.options.selectedPathOptions),B.maintainColor&&(B.color=u.options.color,B.fillColor=u.options.fillColor),u.options.original=L.extend({},u.options),u.options.editing=B);u instanceof L.Marker?(u.editing&&u.editing.enable(),u.dragging.enable(),u.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):u.editing.enable()},_disableLayerEdit:function(u){u=
u.layer||u.target||u;u.edited=!1;u.editing&&u.editing.disable();delete u.options.editing;delete u.options.original;this._selectedPathOptions&&(u instanceof L.Marker?this._toggleMarkerHighlight(u):(u.setStyle(u.options.previousOptions),delete u.options.previousOptions));u instanceof L.Marker?(u.dragging.disable(),u.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",
this._onMarkerDragEnd,this)):u.editing.disable()},_onMouseMove:function(u){this._tooltip.updatePosition(u.latlng)},_onMarkerDragEnd:function(u){u=u.target;u.edited=!0;this._map.fire(L.Draw.Event.EDITMOVE,{layer:u})},_onTouchMove:function(u){var B=this._map.mouseEventToLayerPoint(u.originalEvent.changedTouches[0]);B=this._map.layerPointToLatLng(B);u.target.setLatLng(B)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}});L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},
initialize:function(u,B){if(L.Handler.prototype.initialize.call(this,u),L.Util.setOptions(this,B),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;u=L.version.split(".");1===parseInt(u[0],10)&&2<=parseInt(u[1],10)?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&
(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),
this.fire("disabled",{handler:this.type}))},addHooks:function(){var u=this._map;u&&(u.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=
null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(u){this._deletableLayers.addLayer(u);u.fire("revert-deleted",{layer:u})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(u){this._removeLayer({layer:u})},this);this.save()},_enableLayerDelete:function(u){(u.layer||u.target||u).on("click",
this._removeLayer,this)},_disableLayerDelete:function(u){u=u.layer||u.target||u;u.off("click",this._removeLayer,this);this._deletedLayers.removeLayer(u)},_removeLayer:function(u){u=u.layer||u.target||u;this._deletableLayers.removeLayer(u);this._deletedLayers.addLayer(u);u.fire("deleted")},_onMouseMove:function(u){this._tooltip.updatePosition(u.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(window,document)}
goog.provide("module$node_modules$leaflet_draw$dist$leaflet_draw");
goog.global. module$node_modules$leaflet_draw$dist$leaflet_draw=shadow.js.require(16, {});
